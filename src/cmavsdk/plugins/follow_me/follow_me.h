// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/follow_me/follow_me.proto)

#ifndef CMAVSDK_FOLLOW_ME_H
#define CMAVSDK_FOLLOW_ME_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Allow users to command the vehicle to follow a specific target.
 * The target is provided as a GPS coordinate and altitude.
 */

// ===== Forward Declarations =====
typedef void* mavsdk_system_t;

// ===== Opaque Handles =====
typedef void* mavsdk_follow_me_t;

// ===== Enums =====

// ===== Structs =====
/**
 * @brief Altitude mode to configure which altitude the follow me will assume the target to be at.
 */
typedef enum {
    /**  Target assumed to be mobing at a constant altitude of home position (where the vehicle armed). */
    MAVSDK_FOLLOW_ME_CONFIG_FOLLOW_ALTITUDE_MODE_CONSTANT = 0,
    /**  Target assumed to be at the terrain level sensed by the distance sensor. */
    MAVSDK_FOLLOW_ME_CONFIG_FOLLOW_ALTITUDE_MODE_TERRAIN = 1,
    /**  Target GPS altitude taken into account to do 3D tracking. */
    MAVSDK_FOLLOW_ME_CONFIG_FOLLOW_ALTITUDE_MODE_TARGET_GPS = 2,
} mavsdk_follow_me_config_follow_altitude_mode_t;

/**
 * @brief Configuration type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_follow_me_config_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  [m] Follow height in meters (recommended minimum 8 meters) */
    float follow_height_m;
    /**  [m] Follow distance to target in meters (recommended minimum 4 meter) */
    float follow_distance_m;
    /**  How responsive the vehicle is to the motion of the target, Lower value = More responsive (range 0.0 to 1.0) */
    float responsiveness;
    /**  Follow Altitude control mode */
    mavsdk_follow_me_config_follow_altitude_mode_t altitude_mode;
    /**  [m/s] Maximum orbit tangential velocity relative to the target, in meters per second. Higher value = More aggressive follow angle tracking. */
    float max_tangential_vel_m_s;
    /**  [deg] Follow Angle relative to the target. 0 equals following in front of the target's direction. Angle increases in Clockwise direction, so following from right would be 90 degrees, from the left is -90 degrees, and so on. */
    float follow_angle_deg;
} mavsdk_follow_me_config_t;

/**
 * @brief Destroy a config struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_follow_me_config_destroy(
    mavsdk_follow_me_config_t* target);

/**
 * @brief Destroy an array of config structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_config_array_destroy(
    mavsdk_follow_me_config_t** array,
    size_t size);

/**
 * @brief Target location for the vehicle to follow
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_follow_me_target_location_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Target latitude in degrees */
    double latitude_deg;
    /**  Target longitude in degrees */
    double longitude_deg;
    /**  Target altitude in meters above MSL */
    float absolute_altitude_m;
    /**  Target velocity in X axis, in meters per second */
    float velocity_x_m_s;
    /**  Target velocity in Y axis, in meters per second */
    float velocity_y_m_s;
    /**  Target velocity in Z axis, in meters per second */
    float velocity_z_m_s;
} mavsdk_follow_me_target_location_t;

/**
 * @brief Destroy a target_location struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_follow_me_target_location_destroy(
    mavsdk_follow_me_target_location_t* target);

/**
 * @brief Destroy an array of target_location structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_target_location_array_destroy(
    mavsdk_follow_me_target_location_t** array,
    size_t size);

/**
 * @brief Possible results returned for followme operations
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_FOLLOW_ME_RESULT_UNKNOWN = 0,
    /**  Request succeeded. */
    MAVSDK_FOLLOW_ME_RESULT_SUCCESS = 1,
    /**  No system connected. */
    MAVSDK_FOLLOW_ME_RESULT_NO_SYSTEM = 2,
    /**  Connection error. */
    MAVSDK_FOLLOW_ME_RESULT_CONNECTION_ERROR = 3,
    /**  Vehicle is busy. */
    MAVSDK_FOLLOW_ME_RESULT_BUSY = 4,
    /**  Command denied. */
    MAVSDK_FOLLOW_ME_RESULT_COMMAND_DENIED = 5,
    /**  Request timed out. */
    MAVSDK_FOLLOW_ME_RESULT_TIMEOUT = 6,
    /**  FollowMe is not active. */
    MAVSDK_FOLLOW_ME_RESULT_NOT_ACTIVE = 7,
    /**  Failed to set FollowMe configuration. */
    MAVSDK_FOLLOW_ME_RESULT_SET_CONFIG_FAILED = 8,
} mavsdk_follow_me_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_follow_me_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====

// ===== FollowMe Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_follow_me_t mavsdk_follow_me_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_follow_me_destroy(mavsdk_follow_me_t follow_me);

// ===== Methods =====

/**
 * @brief Get the current get config (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_config_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_follow_me_get_config(
    mavsdk_follow_me_t follow_me,
    mavsdk_follow_me_config_t* config_out);


/**
 * @brief Get the current set config (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_config_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_follow_me_result_t
mavsdk_follow_me_set_config(
    mavsdk_follow_me_t follow_me,
    mavsdk_follow_me_config_t config);


/**
 * @brief Get the current is active (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param is_active_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_follow_me_is_active(
    mavsdk_follow_me_t follow_me,
    bool* is_active_out);


/**
 * @brief Get the current set target location (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_target_location_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_follow_me_result_t
mavsdk_follow_me_set_target_location(
    mavsdk_follow_me_t follow_me,
    mavsdk_follow_me_target_location_t location);


/**
 * @brief Get the current get last location (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_last_location_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_follow_me_get_last_location(
    mavsdk_follow_me_t follow_me,
    mavsdk_follow_me_target_location_t* location_out);


/**
 * @brief Get the current start (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param start_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_follow_me_result_t
mavsdk_follow_me_start(
    mavsdk_follow_me_t follow_me);


/**
 * @brief Get the current stop (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param stop_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_follow_me_result_t
mavsdk_follow_me_stop(
    mavsdk_follow_me_t follow_me);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_FOLLOW_ME_H