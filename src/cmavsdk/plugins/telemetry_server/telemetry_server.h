// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/telemetry_server/telemetry_server.proto)

#ifndef CMAVSDK_TELEMETRY_SERVER_H
#define CMAVSDK_TELEMETRY_SERVER_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Allow users to provide vehicle telemetry and state information
 * (e.g. battery, GPS, RC connection, flight mode etc.) and set telemetry update rates.
 */

// ===== Forward Declarations =====
typedef void* mavsdk_server_component_t;

// ===== Opaque Handles =====
typedef void* mavsdk_telemetry_server_t;

// ===== Enums =====
/**
 * @brief GPS fix type.
 */
typedef enum {
    /**  No GPS connected. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_GPS = 0,
    /**  No position information, GPS is connected. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_FIX = 1,
    /**  2D position. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_2D = 2,
    /**  3D position. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_3D = 3,
    /**  DGPS/SBAS aided 3D position. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_DGPS = 4,
    /**  RTK float, 3D position. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FLOAT = 5,
    /**  RTK Fixed, 3D position. */
    MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FIXED = 6,
} mavsdk_telemetry_server_fix_type_t;

/**
 * @brief Maps to MAV_VTOL_STATE
 */
typedef enum {
    /**  Not VTOL. */
    MAVSDK_TELEMETRY_SERVER_VTOL_STATE_UNDEFINED = 0,
    /**  Transitioning to fixed-wing. */
    MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_FW = 1,
    /**  Transitioning to multi-copter. */
    MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_MC = 2,
    /**  Multi-copter. */
    MAVSDK_TELEMETRY_SERVER_VTOL_STATE_MC = 3,
    /**  Fixed-wing. */
    MAVSDK_TELEMETRY_SERVER_VTOL_STATE_FW = 4,
} mavsdk_telemetry_server_vtol_state_t;

/**
 * @brief Status types.
 */
typedef enum {
    /**  Debug. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_DEBUG = 0,
    /**  Information. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_INFO = 1,
    /**  Notice. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_NOTICE = 2,
    /**  Warning. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_WARNING = 3,
    /**  Error. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ERROR = 4,
    /**  Critical. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_CRITICAL = 5,
    /**  Alert. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ALERT = 6,
    /**  Emergency. */
    MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_EMERGENCY = 7,
} mavsdk_telemetry_server_status_text_type_t;

/**
 * @brief Landed State enumeration.
 */
typedef enum {
    /**  Landed state is unknown. */
    MAVSDK_TELEMETRY_SERVER_LANDED_STATE_UNKNOWN = 0,
    /**  The vehicle is on the ground. */
    MAVSDK_TELEMETRY_SERVER_LANDED_STATE_ON_GROUND = 1,
    /**  The vehicle is in the air. */
    MAVSDK_TELEMETRY_SERVER_LANDED_STATE_IN_AIR = 2,
    /**  The vehicle is taking off. */
    MAVSDK_TELEMETRY_SERVER_LANDED_STATE_TAKING_OFF = 3,
    /**  The vehicle is landing. */
    MAVSDK_TELEMETRY_SERVER_LANDED_STATE_LANDING = 4,
} mavsdk_telemetry_server_landed_state_t;


// ===== Structs =====
/**
 * @brief Position type in global coordinates.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_position_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Latitude in degrees (range: -90 to +90) */
    double latitude_deg;
    /**  Longitude in degrees (range: -180 to +180) */
    double longitude_deg;
    /**  Altitude AMSL (above mean sea level) in metres */
    float absolute_altitude_m;
    /**  Altitude relative to takeoff altitude in metres */
    float relative_altitude_m;
} mavsdk_telemetry_server_position_t;

/**
 * @brief Destroy a position struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_destroy(
    mavsdk_telemetry_server_position_t* target);

/**
 * @brief Destroy an array of position structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_array_destroy(
    mavsdk_telemetry_server_position_t** array,
    size_t size);

/**
 * @brief Heading type used for global position
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_heading_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Heading in degrees (range: 0 to +360) */
    double heading_deg;
} mavsdk_telemetry_server_heading_t;

/**
 * @brief Destroy a heading struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_heading_destroy(
    mavsdk_telemetry_server_heading_t* target);

/**
 * @brief Destroy an array of heading structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_heading_array_destroy(
    mavsdk_telemetry_server_heading_t** array,
    size_t size);

/**
 * @brief Quaternion type.
 * 
 *  All rotations and axis systems follow the right-hand rule.
 *  The Hamilton quaternion product definition is used.
 *  A zero-rotation quaternion is represented by (1,0,0,0).
 *  The quaternion could also be written as w + xi + yj + zk.
 * 
 *  For more info see: https://en.wikipedia.org/wiki/Quaternion
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_quaternion_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Quaternion entry 0, also denoted as a */
    float w;
    /**  Quaternion entry 1, also denoted as b */
    float x;
    /**  Quaternion entry 2, also denoted as c */
    float y;
    /**  Quaternion entry 3, also denoted as d */
    float z;
    /**  Timestamp in microseconds */
    uint64_t timestamp_us;
} mavsdk_telemetry_server_quaternion_t;

/**
 * @brief Destroy a quaternion struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_quaternion_destroy(
    mavsdk_telemetry_server_quaternion_t* target);

/**
 * @brief Destroy an array of quaternion structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_quaternion_array_destroy(
    mavsdk_telemetry_server_quaternion_t** array,
    size_t size);

/**
 * @brief Euler angle type.
 * 
 *  All rotations and axis systems follow the right-hand rule.
 *  The Euler angles follow the convention of a 3-2-1 intrinsic Tait-Bryan rotation sequence.
 * 
 *  For more info see https://en.wikipedia.org/wiki/Euler_angles
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_euler_angle_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Roll angle in degrees, positive is banking to the right */
    float roll_deg;
    /**  Pitch angle in degrees, positive is pitching nose up */
    float pitch_deg;
    /**  Yaw angle in degrees, positive is clock-wise seen from above */
    float yaw_deg;
    /**  Timestamp in microseconds */
    uint64_t timestamp_us;
} mavsdk_telemetry_server_euler_angle_t;

/**
 * @brief Destroy a euler_angle struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_euler_angle_destroy(
    mavsdk_telemetry_server_euler_angle_t* target);

/**
 * @brief Destroy an array of euler_angle structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_euler_angle_array_destroy(
    mavsdk_telemetry_server_euler_angle_t** array,
    size_t size);

/**
 * @brief Angular velocity type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_angular_velocity_body_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Roll angular velocity */
    float roll_rad_s;
    /**  Pitch angular velocity */
    float pitch_rad_s;
    /**  Yaw angular velocity */
    float yaw_rad_s;
} mavsdk_telemetry_server_angular_velocity_body_t;

/**
 * @brief Destroy a angular_velocity_body struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_angular_velocity_body_destroy(
    mavsdk_telemetry_server_angular_velocity_body_t* target);

/**
 * @brief Destroy an array of angular_velocity_body structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_angular_velocity_body_array_destroy(
    mavsdk_telemetry_server_angular_velocity_body_t** array,
    size_t size);

/**
 * @brief GPS information type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_gps_info_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Number of visible satellites in use */
    int32_t num_satellites;
    /**  Fix type */
    mavsdk_telemetry_server_fix_type_t fix_type;
} mavsdk_telemetry_server_gps_info_t;

/**
 * @brief Destroy a gps_info struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_gps_info_destroy(
    mavsdk_telemetry_server_gps_info_t* target);

/**
 * @brief Destroy an array of gps_info structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_gps_info_array_destroy(
    mavsdk_telemetry_server_gps_info_t** array,
    size_t size);

/**
 * @brief Raw GPS information type.
 * 
 *  Warning: this is an advanced type! If you want the location of the drone, use
 *  the position instead. This message exposes the raw values of the GNSS sensor.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_raw_gps_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Timestamp in microseconds (UNIX Epoch time or time since system boot, to be inferred) */
    uint64_t timestamp_us;
    /**  Latitude in degrees (WGS84, EGM96 ellipsoid) */
    double latitude_deg;
    /**  Longitude in degrees (WGS84, EGM96 ellipsoid) */
    double longitude_deg;
    /**  Altitude AMSL (above mean sea level) in metres */
    float absolute_altitude_m;
    /**  GPS HDOP horizontal dilution of position (unitless). If unknown, set to NaN */
    float hdop;
    /**  GPS VDOP vertical dilution of position (unitless). If unknown, set to NaN */
    float vdop;
    /**  Ground velocity in metres per second */
    float velocity_m_s;
    /**  Course over ground (NOT heading, but direction of movement) in degrees. If unknown, set to NaN */
    float cog_deg;
    /**  Altitude in metres (above WGS84, EGM96 ellipsoid) */
    float altitude_ellipsoid_m;
    /**  Position uncertainty in metres */
    float horizontal_uncertainty_m;
    /**  Altitude uncertainty in metres */
    float vertical_uncertainty_m;
    /**  Velocity uncertainty in metres per second */
    float velocity_uncertainty_m_s;
    /**  Heading uncertainty in degrees */
    float heading_uncertainty_deg;
    /**  Yaw in earth frame from north. */
    float yaw_deg;
} mavsdk_telemetry_server_raw_gps_t;

/**
 * @brief Destroy a raw_gps struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_raw_gps_destroy(
    mavsdk_telemetry_server_raw_gps_t* target);

/**
 * @brief Destroy an array of raw_gps structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_raw_gps_array_destroy(
    mavsdk_telemetry_server_raw_gps_t** array,
    size_t size);

/**
 * @brief Battery type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_battery_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Voltage in volts */
    float voltage_v;
    /**  Estimated battery remaining (range: 0.0 to 1.0) */
    float remaining_percent;
} mavsdk_telemetry_server_battery_t;

/**
 * @brief Destroy a battery struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_battery_destroy(
    mavsdk_telemetry_server_battery_t* target);

/**
 * @brief Destroy an array of battery structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_battery_array_destroy(
    mavsdk_telemetry_server_battery_t** array,
    size_t size);

/**
 * @brief Remote control status type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_rc_status_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  True if an RC signal has been available once */
    bool was_available_once;
    /**  True if the RC signal is available now */
    bool is_available;
    /**  Signal strength (range: 0 to 100, NaN if unknown) */
    float signal_strength_percent;
} mavsdk_telemetry_server_rc_status_t;

/**
 * @brief Destroy a rc_status struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_rc_status_destroy(
    mavsdk_telemetry_server_rc_status_t* target);

/**
 * @brief Destroy an array of rc_status structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_rc_status_array_destroy(
    mavsdk_telemetry_server_rc_status_t** array,
    size_t size);

/**
 * @brief StatusText information type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_status_text_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Message type */
    mavsdk_telemetry_server_status_text_type_t type;
    /**  MAVLink status message */
    char* text;
} mavsdk_telemetry_server_status_text_t;

/**
 * @brief Destroy a status_text struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_status_text_destroy(
    mavsdk_telemetry_server_status_text_t* target);

/**
 * @brief Destroy an array of status_text structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_status_text_array_destroy(
    mavsdk_telemetry_server_status_text_t** array,
    size_t size);

/**
 * @brief Actuator control target type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_actuator_control_target_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  An actuator control group is e.g. 'attitude' for the core flight controls, or 'gimbal' for a payload. */
    int32_t group;
    /**  Controls normed from -1 to 1, where 0 is neutral position. */
    float* controls;
    size_t controls_size;
} mavsdk_telemetry_server_actuator_control_target_t;

/**
 * @brief Destroy a actuator_control_target struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_actuator_control_target_destroy(
    mavsdk_telemetry_server_actuator_control_target_t* target);

/**
 * @brief Destroy an array of actuator_control_target structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_actuator_control_target_array_destroy(
    mavsdk_telemetry_server_actuator_control_target_t** array,
    size_t size);

/**
 * @brief Actuator output status type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_actuator_output_status_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Active outputs */
    uint32_t active;
    /**  Servo/motor output values */
    float* actuator;
    size_t actuator_size;
} mavsdk_telemetry_server_actuator_output_status_t;

/**
 * @brief Destroy a actuator_output_status struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_actuator_output_status_destroy(
    mavsdk_telemetry_server_actuator_output_status_t* target);

/**
 * @brief Destroy an array of actuator_output_status structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_actuator_output_status_array_destroy(
    mavsdk_telemetry_server_actuator_output_status_t** array,
    size_t size);

/**
 * @brief Covariance type.
 * 
 *  Row-major representation of a 6x6 cross-covariance matrix
 *  upper right triangle.
 *  Set first to NaN if unknown.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_covariance_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Representation of a covariance matrix. */
    float* covariance_matrix;
    size_t covariance_matrix_size;
} mavsdk_telemetry_server_covariance_t;

/**
 * @brief Destroy a covariance struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_covariance_destroy(
    mavsdk_telemetry_server_covariance_t* target);

/**
 * @brief Destroy an array of covariance structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_covariance_array_destroy(
    mavsdk_telemetry_server_covariance_t** array,
    size_t size);

/**
 * @brief Velocity type, represented in the Body (X Y Z) frame and in metres/second.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_velocity_body_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Velocity in X in metres/second */
    float x_m_s;
    /**  Velocity in Y in metres/second */
    float y_m_s;
    /**  Velocity in Z in metres/second */
    float z_m_s;
} mavsdk_telemetry_server_velocity_body_t;

/**
 * @brief Destroy a velocity_body struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_velocity_body_destroy(
    mavsdk_telemetry_server_velocity_body_t* target);

/**
 * @brief Destroy an array of velocity_body structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_velocity_body_array_destroy(
    mavsdk_telemetry_server_velocity_body_t** array,
    size_t size);

/**
 * @brief Position type, represented in the Body (X Y Z) frame
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_position_body_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  X Position in metres. */
    float x_m;
    /**  Y Position in metres. */
    float y_m;
    /**  Z Position in metres. */
    float z_m;
} mavsdk_telemetry_server_position_body_t;

/**
 * @brief Destroy a position_body struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_body_destroy(
    mavsdk_telemetry_server_position_body_t* target);

/**
 * @brief Destroy an array of position_body structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_body_array_destroy(
    mavsdk_telemetry_server_position_body_t** array,
    size_t size);

/**
 * @brief Mavlink frame id
 */
typedef enum {
    /**  Frame is undefined.. */
    MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_UNDEF = 0,
    /**  Setpoint in body NED frame. This makes sense if all position control is externalized - e.g. useful to command 2 m/s^2 acceleration to the right.. */
    MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_BODY_NED = 1,
    /**  Odometry local coordinate frame of data given by a vision estimation system, Z-down (x: north, y: east, z: down).. */
    MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_VISION_NED = 2,
    /**  Odometry local coordinate frame of data given by an estimator running onboard the vehicle, Z-down (x: north, y: east, z: down).. */
    MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_ESTIM_NED = 3,
} mavsdk_telemetry_server_odometry_mav_frame_t;

/**
 * @brief Odometry message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_odometry_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Timestamp (0 to use Backend timestamp). */
    uint64_t time_usec;
    /**  Coordinate frame of reference for the pose data. */
    mavsdk_telemetry_server_odometry_mav_frame_t frame_id;
    /**  Coordinate frame of reference for the velocity in free space (twist) data. */
    mavsdk_telemetry_server_odometry_mav_frame_t child_frame_id;
    /**  Position. */
    mavsdk_telemetry_server_position_body_t position_body;
    /**  Quaternion components, w, x, y, z (1 0 0 0 is the null-rotation). */
    mavsdk_telemetry_server_quaternion_t q;
    /**  Linear velocity (m/s). */
    mavsdk_telemetry_server_velocity_body_t velocity_body;
    /**  Angular velocity (rad/s). */
    mavsdk_telemetry_server_angular_velocity_body_t angular_velocity_body;
    /**  Pose cross-covariance matrix. */
    mavsdk_telemetry_server_covariance_t pose_covariance;
    /**  Velocity cross-covariance matrix. */
    mavsdk_telemetry_server_covariance_t velocity_covariance;
} mavsdk_telemetry_server_odometry_t;

/**
 * @brief Destroy a odometry struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_odometry_destroy(
    mavsdk_telemetry_server_odometry_t* target);

/**
 * @brief Destroy an array of odometry structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_odometry_array_destroy(
    mavsdk_telemetry_server_odometry_t** array,
    size_t size);

/**
 * @brief DistanceSensor message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_distance_sensor_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Minimum distance the sensor can measure, NaN if unknown. */
    float minimum_distance_m;
    /**  Maximum distance the sensor can measure, NaN if unknown. */
    float maximum_distance_m;
    /**  Current distance reading, NaN if unknown. */
    float current_distance_m;
} mavsdk_telemetry_server_distance_sensor_t;

/**
 * @brief Destroy a distance_sensor struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_distance_sensor_destroy(
    mavsdk_telemetry_server_distance_sensor_t* target);

/**
 * @brief Destroy an array of distance_sensor structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_distance_sensor_array_destroy(
    mavsdk_telemetry_server_distance_sensor_t** array,
    size_t size);

/**
 * @brief Scaled Pressure message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_scaled_pressure_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Timestamp (time since system boot) */
    uint64_t timestamp_us;
    /**  Absolute pressure in hPa */
    float absolute_pressure_hpa;
    /**  Differential pressure 1 in hPa */
    float differential_pressure_hpa;
    /**  Absolute pressure temperature (in celsius) */
    float temperature_deg;
    /**  Differential pressure temperature (in celsius, 0 if not available) */
    float differential_pressure_temperature_deg;
} mavsdk_telemetry_server_scaled_pressure_t;

/**
 * @brief Destroy a scaled_pressure struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_scaled_pressure_destroy(
    mavsdk_telemetry_server_scaled_pressure_t* target);

/**
 * @brief Destroy an array of scaled_pressure structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_scaled_pressure_array_destroy(
    mavsdk_telemetry_server_scaled_pressure_t** array,
    size_t size);

/**
 * @brief PositionNed message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_position_ned_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Position along north direction in metres */
    float north_m;
    /**  Position along east direction in metres */
    float east_m;
    /**  Position along down direction in metres */
    float down_m;
} mavsdk_telemetry_server_position_ned_t;

/**
 * @brief Destroy a position_ned struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_ned_destroy(
    mavsdk_telemetry_server_position_ned_t* target);

/**
 * @brief Destroy an array of position_ned structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_ned_array_destroy(
    mavsdk_telemetry_server_position_ned_t** array,
    size_t size);

/**
 * @brief VelocityNed message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_velocity_ned_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Velocity along north direction in metres per second */
    float north_m_s;
    /**  Velocity along east direction in metres per second */
    float east_m_s;
    /**  Velocity along down direction in metres per second */
    float down_m_s;
} mavsdk_telemetry_server_velocity_ned_t;

/**
 * @brief Destroy a velocity_ned struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_velocity_ned_destroy(
    mavsdk_telemetry_server_velocity_ned_t* target);

/**
 * @brief Destroy an array of velocity_ned structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_velocity_ned_array_destroy(
    mavsdk_telemetry_server_velocity_ned_t** array,
    size_t size);

/**
 * @brief PositionVelocityNed message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_position_velocity_ned_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Position (NED) */
    mavsdk_telemetry_server_position_ned_t position;
    /**  Velocity (NED) */
    mavsdk_telemetry_server_velocity_ned_t velocity;
} mavsdk_telemetry_server_position_velocity_ned_t;

/**
 * @brief Destroy a position_velocity_ned struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_velocity_ned_destroy(
    mavsdk_telemetry_server_position_velocity_ned_t* target);

/**
 * @brief Destroy an array of position_velocity_ned structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_position_velocity_ned_array_destroy(
    mavsdk_telemetry_server_position_velocity_ned_t** array,
    size_t size);

/**
 * @brief GroundTruth message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_ground_truth_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Latitude in degrees (range: -90 to +90) */
    double latitude_deg;
    /**  Longitude in degrees (range: -180 to 180) */
    double longitude_deg;
    /**  Altitude AMSL (above mean sea level) in metres */
    float absolute_altitude_m;
} mavsdk_telemetry_server_ground_truth_t;

/**
 * @brief Destroy a ground_truth struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_ground_truth_destroy(
    mavsdk_telemetry_server_ground_truth_t* target);

/**
 * @brief Destroy an array of ground_truth structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_ground_truth_array_destroy(
    mavsdk_telemetry_server_ground_truth_t** array,
    size_t size);

/**
 * @brief FixedwingMetrics message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_fixedwing_metrics_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Current indicated airspeed (IAS) in metres per second */
    float airspeed_m_s;
    /**  Current throttle setting (0 to 100) */
    float throttle_percentage;
    /**  Current climb rate in metres per second */
    float climb_rate_m_s;
    /**  Current groundspeed metres per second */
    float groundspeed_m_s;
    /**  Current heading in compass units (0-360, 0=north) */
    float heading_deg;
    /**  Current altitude in metres (MSL) */
    float absolute_altitude_m;
} mavsdk_telemetry_server_fixedwing_metrics_t;

/**
 * @brief Destroy a fixedwing_metrics struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_fixedwing_metrics_destroy(
    mavsdk_telemetry_server_fixedwing_metrics_t* target);

/**
 * @brief Destroy an array of fixedwing_metrics structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_fixedwing_metrics_array_destroy(
    mavsdk_telemetry_server_fixedwing_metrics_t** array,
    size_t size);

/**
 * @brief AccelerationFrd message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_acceleration_frd_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Acceleration in forward direction in metres per second^2 */
    float forward_m_s2;
    /**  Acceleration in right direction in metres per second^2 */
    float right_m_s2;
    /**  Acceleration in down direction in metres per second^2 */
    float down_m_s2;
} mavsdk_telemetry_server_acceleration_frd_t;

/**
 * @brief Destroy a acceleration_frd struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_acceleration_frd_destroy(
    mavsdk_telemetry_server_acceleration_frd_t* target);

/**
 * @brief Destroy an array of acceleration_frd structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_acceleration_frd_array_destroy(
    mavsdk_telemetry_server_acceleration_frd_t** array,
    size_t size);

/**
 * @brief AngularVelocityFrd message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_angular_velocity_frd_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Angular velocity in forward direction in radians per second */
    float forward_rad_s;
    /**  Angular velocity in right direction in radians per second */
    float right_rad_s;
    /**  Angular velocity in Down direction in radians per second */
    float down_rad_s;
} mavsdk_telemetry_server_angular_velocity_frd_t;

/**
 * @brief Destroy a angular_velocity_frd struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_angular_velocity_frd_destroy(
    mavsdk_telemetry_server_angular_velocity_frd_t* target);

/**
 * @brief Destroy an array of angular_velocity_frd structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_angular_velocity_frd_array_destroy(
    mavsdk_telemetry_server_angular_velocity_frd_t** array,
    size_t size);

/**
 * @brief MagneticFieldFrd message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_magnetic_field_frd_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Magnetic field in forward direction measured in Gauss */
    float forward_gauss;
    /**  Magnetic field in East direction measured in Gauss */
    float right_gauss;
    /**  Magnetic field in Down direction measured in Gauss */
    float down_gauss;
} mavsdk_telemetry_server_magnetic_field_frd_t;

/**
 * @brief Destroy a magnetic_field_frd struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_magnetic_field_frd_destroy(
    mavsdk_telemetry_server_magnetic_field_frd_t* target);

/**
 * @brief Destroy an array of magnetic_field_frd structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_magnetic_field_frd_array_destroy(
    mavsdk_telemetry_server_magnetic_field_frd_t** array,
    size_t size);

/**
 * @brief Imu message type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_telemetry_server_imu_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Acceleration */
    mavsdk_telemetry_server_acceleration_frd_t acceleration_frd;
    /**  Angular velocity */
    mavsdk_telemetry_server_angular_velocity_frd_t angular_velocity_frd;
    /**  Magnetic field */
    mavsdk_telemetry_server_magnetic_field_frd_t magnetic_field_frd;
    /**  Temperature */
    float temperature_degc;
    /**  Timestamp in microseconds */
    uint64_t timestamp_us;
} mavsdk_telemetry_server_imu_t;

/**
 * @brief Destroy a imu struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_imu_destroy(
    mavsdk_telemetry_server_imu_t* target);

/**
 * @brief Destroy an array of imu structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_imu_array_destroy(
    mavsdk_telemetry_server_imu_t** array,
    size_t size);

/**
 * @brief Possible results returned for telemetry requests.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_TELEMETRY_SERVER_RESULT_UNKNOWN = 0,
    /**  Success: the telemetry command was accepted by the vehicle. */
    MAVSDK_TELEMETRY_SERVER_RESULT_SUCCESS = 1,
    /**  No system connected. */
    MAVSDK_TELEMETRY_SERVER_RESULT_NO_SYSTEM = 2,
    /**  Connection error. */
    MAVSDK_TELEMETRY_SERVER_RESULT_CONNECTION_ERROR = 3,
    /**  Vehicle is busy. */
    MAVSDK_TELEMETRY_SERVER_RESULT_BUSY = 4,
    /**  Command refused by vehicle. */
    MAVSDK_TELEMETRY_SERVER_RESULT_COMMAND_DENIED = 5,
    /**  Request timed out. */
    MAVSDK_TELEMETRY_SERVER_RESULT_TIMEOUT = 6,
    /**  Request not supported. */
    MAVSDK_TELEMETRY_SERVER_RESULT_UNSUPPORTED = 7,
} mavsdk_telemetry_server_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_telemetry_server_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====

// ===== TelemetryServer Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_telemetry_server_t mavsdk_telemetry_server_create(mavsdk_server_component_t server_component);
CMAVSDK_EXPORT void mavsdk_telemetry_server_destroy(mavsdk_telemetry_server_t telemetry_server);

// ===== Methods =====

/**
 * @brief Get the current publish position (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_position_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_position(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_t position,
    mavsdk_telemetry_server_velocity_ned_t velocity_ned,
    mavsdk_telemetry_server_heading_t heading);


/**
 * @brief Get the current publish home (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_home_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_home(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_t home);


/**
 * @brief Get the current publish sys status (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_sys_status_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_sys_status(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_battery_t battery,
    bool rc_receiver_status,
    bool gyro_status,
    bool accel_status,
    bool mag_status,
    bool gps_status);


/**
 * @brief Get the current publish extended sys state (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_extended_sys_state_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_extended_sys_state(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_vtol_state_t vtol_state,
    mavsdk_telemetry_server_landed_state_t landed_state);


/**
 * @brief Get the current publish raw gps (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_raw_gps_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_raw_gps(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_raw_gps_t raw_gps,
    mavsdk_telemetry_server_gps_info_t gps_info);


/**
 * @brief Get the current publish battery (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_battery_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_battery(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_battery_t battery);


/**
 * @brief Get the current publish status text (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_status_text_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_status_text(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_status_text_t status_text);


/**
 * @brief Get the current publish odometry (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_odometry_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_odometry(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_odometry_t odometry);


/**
 * @brief Get the current publish position velocity ned (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_position_velocity_ned_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_position_velocity_ned(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_velocity_ned_t position_velocity_ned);


/**
 * @brief Get the current publish ground truth (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_ground_truth_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_ground_truth(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_ground_truth_t ground_truth);


/**
 * @brief Get the current publish imu (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_imu_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu);


/**
 * @brief Get the current publish scaled imu (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_scaled_imu_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_scaled_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu);


/**
 * @brief Get the current publish raw imu (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_raw_imu_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_raw_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu);


/**
 * @brief Get the current publish unix epoch time (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_unix_epoch_time_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_unix_epoch_time(
    mavsdk_telemetry_server_t telemetry_server,
    uint64_t time_us);


/**
 * @brief Get the current publish distance sensor (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_distance_sensor_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_distance_sensor(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_distance_sensor_t distance_sensor);


/**
 * @brief Get the current publish attitude (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_attitude_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_attitude(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_euler_angle_t angle,
    mavsdk_telemetry_server_angular_velocity_body_t angular_velocity);


/**
 * @brief Get the current publish visual flight rules hud (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param publish_visual_flight_rules_hud_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_visual_flight_rules_hud(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_fixedwing_metrics_t fixed_wing_metrics);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_TELEMETRY_SERVER_H