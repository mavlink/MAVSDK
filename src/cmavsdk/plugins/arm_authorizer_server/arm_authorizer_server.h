// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/arm_authorizer_server/arm_authorizer_server.proto)

#ifndef CMAVSDK_ARM_AUTHORIZER_SERVER_H
#define CMAVSDK_ARM_AUTHORIZER_SERVER_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Use arm authorization.
 */

// ===== Forward Declarations =====
typedef void* mavsdk_server_component_t;

// ===== Opaque Handles =====
typedef void* mavsdk_arm_authorizer_server_t;
typedef void* mavsdk_arm_authorizer_server_arm_authorization_handle_t;

// ===== Enums =====
/**
 * @brief The rejection reason
 */
typedef enum {
    /**  Not a specific reason. */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_GENERIC = 0,
    /**  Authorizer will send the error as string to GCS. */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_NONE = 1,
    /**  At least one waypoint have a invalid value. */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_INVALID_WAYPOINT = 2,
    /**  Timeout in the authorizer process(in case it depends on network). */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_TIMEOUT = 3,
    /**  Airspace of the mission in use by another vehicle, second result parameter can have the waypoint id that caused it to be denied.. */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_AIRSPACE_IN_USE = 4,
    /**  Weather is not good to fly. */
    MAVSDK_ARM_AUTHORIZER_SERVER_REJECTION_REASON_BAD_WEATHER = 5,
} mavsdk_arm_authorizer_server_rejection_reason_t;


// ===== Structs =====
/**
 * @brief The result
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_ARM_AUTHORIZER_SERVER_RESULT_UNKNOWN = 0,
    /**  Command accepted. */
    MAVSDK_ARM_AUTHORIZER_SERVER_RESULT_SUCCESS = 1,
    /**  Command failed. */
    MAVSDK_ARM_AUTHORIZER_SERVER_RESULT_FAILED = 2,
} mavsdk_arm_authorizer_server_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_arm_authorizer_server_arm_authorization_callback_t)(const uint32_t system_id, void* user_data);

// ===== ArmAuthorizerServer Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_arm_authorizer_server_t mavsdk_arm_authorizer_server_create(mavsdk_server_component_t server_component);
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_destroy(mavsdk_arm_authorizer_server_t arm_authorizer_server);

// ===== Methods =====

/**
 * @brief Subscribe to arm authorization request messages. Each request received should respond to using RespondArmAuthorization
 *
 * @param arm_authorizer_server The arm_authorizer_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_arm_authorizer_server_unsubscribe_arm_authorization() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_arm_authorizer_server_arm_authorization_handle_t mavsdk_arm_authorizer_server_subscribe_arm_authorization(
    mavsdk_arm_authorizer_server_t arm_authorizer_server,
    mavsdk_arm_authorizer_server_arm_authorization_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'arm_authorization' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param arm_authorizer_server The arm_authorizer_server instance.
 * @param handle The subscription handle returned by mavsdk_arm_authorizer_server_subscribe_arm_authorization().
 */
CMAVSDK_EXPORT void mavsdk_arm_authorizer_server_unsubscribe_arm_authorization(
    mavsdk_arm_authorizer_server_t arm_authorizer_server,
    mavsdk_arm_authorizer_server_arm_authorization_handle_t);


/**
 * @brief Get the current accept arm authorization (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param accept_arm_authorization_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_arm_authorizer_server_result_t
mavsdk_arm_authorizer_server_accept_arm_authorization(
    mavsdk_arm_authorizer_server_t arm_authorizer_server,
    int32_t valid_time_s);


/**
 * @brief Get the current reject arm authorization (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param reject_arm_authorization_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_arm_authorizer_server_result_t
mavsdk_arm_authorizer_server_reject_arm_authorization(
    mavsdk_arm_authorizer_server_t arm_authorizer_server,
    bool temporarily,
    mavsdk_arm_authorizer_server_rejection_reason_t reason,
    int32_t extra_info);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_ARM_AUTHORIZER_SERVER_H