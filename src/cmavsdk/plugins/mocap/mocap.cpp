// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/mocap/mocap.proto)

#include "mocap.h"

#include <mavsdk/plugins/mocap/mocap.h>
#include <cstring>
#include <vector>

// ===== C++ to C Type Conversions =====

static mavsdk_mocap_result_t
translate_result(mavsdk::Mocap::Result cpp_result) {
    switch(cpp_result) {
        case mavsdk::Mocap::Result::Unknown:
            return MAVSDK_MOCAP_RESULT_UNKNOWN;
        case mavsdk::Mocap::Result::Success:
            return MAVSDK_MOCAP_RESULT_SUCCESS;
        case mavsdk::Mocap::Result::NoSystem:
            return MAVSDK_MOCAP_RESULT_NO_SYSTEM;
        case mavsdk::Mocap::Result::ConnectionError:
            return MAVSDK_MOCAP_RESULT_CONNECTION_ERROR;
        case mavsdk::Mocap::Result::InvalidRequestData:
            return MAVSDK_MOCAP_RESULT_INVALID_REQUEST_DATA;
        case mavsdk::Mocap::Result::Unsupported:
            return MAVSDK_MOCAP_RESULT_UNSUPPORTED;
    }
}



static mavsdk::Mocap::PositionBody
translate_PositionBody_from_c(const mavsdk_mocap_PositionBody_t& c_struct) {
    mavsdk::Mocap::PositionBody cpp_struct{};
    cpp_struct.x_m = c_struct.x_m;
    cpp_struct.y_m = c_struct.y_m;
    cpp_struct.z_m = c_struct.z_m;
    return cpp_struct;
}

static mavsdk_mocap_PositionBody_t
translate_PositionBody_to_c(const mavsdk::Mocap::PositionBody& cpp_struct) {
    mavsdk_mocap_PositionBody_t c_struct{};
    c_struct.x_m = cpp_struct.x_m;
    c_struct.y_m = cpp_struct.y_m;
    c_struct.z_m = cpp_struct.z_m;
    return c_struct;
}

void mavsdk_mocap_PositionBody_destroy(
    mavsdk_mocap_PositionBody_t* target) {
    if (!target) return;
}

void mavsdk_mocap_PositionBody_array_destroy(
    mavsdk_mocap_PositionBody_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_PositionBody_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::AngleBody
translate_AngleBody_from_c(const mavsdk_mocap_AngleBody_t& c_struct) {
    mavsdk::Mocap::AngleBody cpp_struct{};
    cpp_struct.roll_rad = c_struct.roll_rad;
    cpp_struct.pitch_rad = c_struct.pitch_rad;
    cpp_struct.yaw_rad = c_struct.yaw_rad;
    return cpp_struct;
}

static mavsdk_mocap_AngleBody_t
translate_AngleBody_to_c(const mavsdk::Mocap::AngleBody& cpp_struct) {
    mavsdk_mocap_AngleBody_t c_struct{};
    c_struct.roll_rad = cpp_struct.roll_rad;
    c_struct.pitch_rad = cpp_struct.pitch_rad;
    c_struct.yaw_rad = cpp_struct.yaw_rad;
    return c_struct;
}

void mavsdk_mocap_AngleBody_destroy(
    mavsdk_mocap_AngleBody_t* target) {
    if (!target) return;
}

void mavsdk_mocap_AngleBody_array_destroy(
    mavsdk_mocap_AngleBody_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_AngleBody_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::SpeedBody
translate_SpeedBody_from_c(const mavsdk_mocap_SpeedBody_t& c_struct) {
    mavsdk::Mocap::SpeedBody cpp_struct{};
    cpp_struct.x_m_s = c_struct.x_m_s;
    cpp_struct.y_m_s = c_struct.y_m_s;
    cpp_struct.z_m_s = c_struct.z_m_s;
    return cpp_struct;
}

static mavsdk_mocap_SpeedBody_t
translate_SpeedBody_to_c(const mavsdk::Mocap::SpeedBody& cpp_struct) {
    mavsdk_mocap_SpeedBody_t c_struct{};
    c_struct.x_m_s = cpp_struct.x_m_s;
    c_struct.y_m_s = cpp_struct.y_m_s;
    c_struct.z_m_s = cpp_struct.z_m_s;
    return c_struct;
}

void mavsdk_mocap_SpeedBody_destroy(
    mavsdk_mocap_SpeedBody_t* target) {
    if (!target) return;
}

void mavsdk_mocap_SpeedBody_array_destroy(
    mavsdk_mocap_SpeedBody_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_SpeedBody_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::SpeedNed
translate_SpeedNed_from_c(const mavsdk_mocap_SpeedNed_t& c_struct) {
    mavsdk::Mocap::SpeedNed cpp_struct{};
    cpp_struct.north_m_s = c_struct.north_m_s;
    cpp_struct.east_m_s = c_struct.east_m_s;
    cpp_struct.down_m_s = c_struct.down_m_s;
    return cpp_struct;
}

static mavsdk_mocap_SpeedNed_t
translate_SpeedNed_to_c(const mavsdk::Mocap::SpeedNed& cpp_struct) {
    mavsdk_mocap_SpeedNed_t c_struct{};
    c_struct.north_m_s = cpp_struct.north_m_s;
    c_struct.east_m_s = cpp_struct.east_m_s;
    c_struct.down_m_s = cpp_struct.down_m_s;
    return c_struct;
}

void mavsdk_mocap_SpeedNed_destroy(
    mavsdk_mocap_SpeedNed_t* target) {
    if (!target) return;
}

void mavsdk_mocap_SpeedNed_array_destroy(
    mavsdk_mocap_SpeedNed_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_SpeedNed_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::AngularVelocityBody
translate_AngularVelocityBody_from_c(const mavsdk_mocap_AngularVelocityBody_t& c_struct) {
    mavsdk::Mocap::AngularVelocityBody cpp_struct{};
    cpp_struct.roll_rad_s = c_struct.roll_rad_s;
    cpp_struct.pitch_rad_s = c_struct.pitch_rad_s;
    cpp_struct.yaw_rad_s = c_struct.yaw_rad_s;
    return cpp_struct;
}

static mavsdk_mocap_AngularVelocityBody_t
translate_AngularVelocityBody_to_c(const mavsdk::Mocap::AngularVelocityBody& cpp_struct) {
    mavsdk_mocap_AngularVelocityBody_t c_struct{};
    c_struct.roll_rad_s = cpp_struct.roll_rad_s;
    c_struct.pitch_rad_s = cpp_struct.pitch_rad_s;
    c_struct.yaw_rad_s = cpp_struct.yaw_rad_s;
    return c_struct;
}

void mavsdk_mocap_AngularVelocityBody_destroy(
    mavsdk_mocap_AngularVelocityBody_t* target) {
    if (!target) return;
}

void mavsdk_mocap_AngularVelocityBody_array_destroy(
    mavsdk_mocap_AngularVelocityBody_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_AngularVelocityBody_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::Covariance
translate_Covariance_from_c(const mavsdk_mocap_Covariance_t& c_struct) {
    mavsdk::Mocap::Covariance cpp_struct{};
    cpp_struct.covariance_matrix.assign(
        c_struct.covariance_matrix,
        c_struct.covariance_matrix + c_struct.covariance_matrix_size);
    return cpp_struct;
}

static mavsdk_mocap_Covariance_t
translate_Covariance_to_c(const mavsdk::Mocap::Covariance& cpp_struct) {
    mavsdk_mocap_Covariance_t c_struct{};
    c_struct.covariance_matrix_size = cpp_struct.covariance_matrix.size();
    c_struct.covariance_matrix = new float[c_struct.covariance_matrix_size];
    std::copy(cpp_struct.covariance_matrix.begin(), cpp_struct.covariance_matrix.end(), c_struct.covariance_matrix);
    return c_struct;
}

void mavsdk_mocap_Covariance_destroy(
    mavsdk_mocap_Covariance_t* target) {
    if (!target) return;
    if (target->covariance_matrix) {
        delete[] target->covariance_matrix;
        target->covariance_matrix = nullptr;
        target->covariance_matrix_size = 0;
    }
}

void mavsdk_mocap_Covariance_array_destroy(
    mavsdk_mocap_Covariance_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_Covariance_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::Quaternion
translate_Quaternion_from_c(const mavsdk_mocap_Quaternion_t& c_struct) {
    mavsdk::Mocap::Quaternion cpp_struct{};
    cpp_struct.w = c_struct.w;
    cpp_struct.x = c_struct.x;
    cpp_struct.y = c_struct.y;
    cpp_struct.z = c_struct.z;
    return cpp_struct;
}

static mavsdk_mocap_Quaternion_t
translate_Quaternion_to_c(const mavsdk::Mocap::Quaternion& cpp_struct) {
    mavsdk_mocap_Quaternion_t c_struct{};
    c_struct.w = cpp_struct.w;
    c_struct.x = cpp_struct.x;
    c_struct.y = cpp_struct.y;
    c_struct.z = cpp_struct.z;
    return c_struct;
}

void mavsdk_mocap_Quaternion_destroy(
    mavsdk_mocap_Quaternion_t* target) {
    if (!target) return;
}

void mavsdk_mocap_Quaternion_array_destroy(
    mavsdk_mocap_Quaternion_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_Quaternion_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::VisionPositionEstimate
translate_VisionPositionEstimate_from_c(const mavsdk_mocap_VisionPositionEstimate_t& c_struct) {
    mavsdk::Mocap::VisionPositionEstimate cpp_struct{};
    cpp_struct.time_usec = c_struct.time_usec;
    cpp_struct.position_body = translate_PositionBody_from_c(c_struct.position_body);
    cpp_struct.angle_body = translate_AngleBody_from_c(c_struct.angle_body);
    cpp_struct.pose_covariance = translate_Covariance_from_c(c_struct.pose_covariance);
    return cpp_struct;
}

static mavsdk_mocap_VisionPositionEstimate_t
translate_VisionPositionEstimate_to_c(const mavsdk::Mocap::VisionPositionEstimate& cpp_struct) {
    mavsdk_mocap_VisionPositionEstimate_t c_struct{};
    c_struct.time_usec = cpp_struct.time_usec;
    c_struct.position_body = translate_PositionBody_to_c(cpp_struct.position_body);
    c_struct.angle_body = translate_AngleBody_to_c(cpp_struct.angle_body);
    c_struct.pose_covariance = translate_Covariance_to_c(cpp_struct.pose_covariance);
    return c_struct;
}

void mavsdk_mocap_VisionPositionEstimate_destroy(
    mavsdk_mocap_VisionPositionEstimate_t* target) {
    if (!target) return;
}

void mavsdk_mocap_VisionPositionEstimate_array_destroy(
    mavsdk_mocap_VisionPositionEstimate_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_VisionPositionEstimate_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::VisionSpeedEstimate
translate_VisionSpeedEstimate_from_c(const mavsdk_mocap_VisionSpeedEstimate_t& c_struct) {
    mavsdk::Mocap::VisionSpeedEstimate cpp_struct{};
    cpp_struct.time_usec = c_struct.time_usec;
    cpp_struct.speed_ned = translate_SpeedNed_from_c(c_struct.speed_ned);
    cpp_struct.speed_covariance = translate_Covariance_from_c(c_struct.speed_covariance);
    return cpp_struct;
}

static mavsdk_mocap_VisionSpeedEstimate_t
translate_VisionSpeedEstimate_to_c(const mavsdk::Mocap::VisionSpeedEstimate& cpp_struct) {
    mavsdk_mocap_VisionSpeedEstimate_t c_struct{};
    c_struct.time_usec = cpp_struct.time_usec;
    c_struct.speed_ned = translate_SpeedNed_to_c(cpp_struct.speed_ned);
    c_struct.speed_covariance = translate_Covariance_to_c(cpp_struct.speed_covariance);
    return c_struct;
}

void mavsdk_mocap_VisionSpeedEstimate_destroy(
    mavsdk_mocap_VisionSpeedEstimate_t* target) {
    if (!target) return;
}

void mavsdk_mocap_VisionSpeedEstimate_array_destroy(
    mavsdk_mocap_VisionSpeedEstimate_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_VisionSpeedEstimate_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::AttitudePositionMocap
translate_AttitudePositionMocap_from_c(const mavsdk_mocap_AttitudePositionMocap_t& c_struct) {
    mavsdk::Mocap::AttitudePositionMocap cpp_struct{};
    cpp_struct.time_usec = c_struct.time_usec;
    cpp_struct.q = translate_Quaternion_from_c(c_struct.q);
    cpp_struct.position_body = translate_PositionBody_from_c(c_struct.position_body);
    cpp_struct.pose_covariance = translate_Covariance_from_c(c_struct.pose_covariance);
    return cpp_struct;
}

static mavsdk_mocap_AttitudePositionMocap_t
translate_AttitudePositionMocap_to_c(const mavsdk::Mocap::AttitudePositionMocap& cpp_struct) {
    mavsdk_mocap_AttitudePositionMocap_t c_struct{};
    c_struct.time_usec = cpp_struct.time_usec;
    c_struct.q = translate_Quaternion_to_c(cpp_struct.q);
    c_struct.position_body = translate_PositionBody_to_c(cpp_struct.position_body);
    c_struct.pose_covariance = translate_Covariance_to_c(cpp_struct.pose_covariance);
    return c_struct;
}

void mavsdk_mocap_AttitudePositionMocap_destroy(
    mavsdk_mocap_AttitudePositionMocap_t* target) {
    if (!target) return;
}

void mavsdk_mocap_AttitudePositionMocap_array_destroy(
    mavsdk_mocap_AttitudePositionMocap_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_AttitudePositionMocap_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mocap::Odometry::MavFrame
translate_Odometry_MavFrame_from_c(mavsdk_mocap_Odometry_MavFrame_t c_enum) {
    switch(c_enum) {
        case MAVSDK_MOCAP_ODOMETRY_MAV_FRAME_MOCAP_NED:
            return mavsdk::Mocap::Odometry::MavFrame::MocapNed;
        case MAVSDK_MOCAP_ODOMETRY_MAV_FRAME_LOCAL_FRD:
            return mavsdk::Mocap::Odometry::MavFrame::LocalFrd;
    }
    return mavsdk::Mocap::Odometry::MavFrame::MocapNed;
}


static mavsdk::Mocap::Odometry
translate_Odometry_from_c(const mavsdk_mocap_Odometry_t& c_struct) {
    mavsdk::Mocap::Odometry cpp_struct{};
    cpp_struct.time_usec = c_struct.time_usec;
    cpp_struct.frame_id = translate_Odometry_MavFrame_from_c(c_struct.frame_id);
    cpp_struct.position_body = translate_PositionBody_from_c(c_struct.position_body);
    cpp_struct.q = translate_Quaternion_from_c(c_struct.q);
    cpp_struct.speed_body = translate_SpeedBody_from_c(c_struct.speed_body);
    cpp_struct.angular_velocity_body = translate_AngularVelocityBody_from_c(c_struct.angular_velocity_body);
    cpp_struct.pose_covariance = translate_Covariance_from_c(c_struct.pose_covariance);
    cpp_struct.velocity_covariance = translate_Covariance_from_c(c_struct.velocity_covariance);
    return cpp_struct;
}


static mavsdk_mocap_Odometry_MavFrame_t
translate_Odometry_MavFrame_to_c(mavsdk::Mocap::Odometry::MavFrame cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::Mocap::Odometry::MavFrame::MocapNed:
            return MAVSDK_MOCAP_ODOMETRY_MAV_FRAME_MOCAP_NED;
        case mavsdk::Mocap::Odometry::MavFrame::LocalFrd:
            return MAVSDK_MOCAP_ODOMETRY_MAV_FRAME_LOCAL_FRD;
    }
    return MAVSDK_MOCAP_ODOMETRY_MAV_FRAME_MOCAP_NED;
}

static mavsdk_mocap_Odometry_t
translate_Odometry_to_c(const mavsdk::Mocap::Odometry& cpp_struct) {
    mavsdk_mocap_Odometry_t c_struct{};
    c_struct.time_usec = cpp_struct.time_usec;
    c_struct.frame_id = translate_Odometry_MavFrame_to_c(cpp_struct.frame_id);
    c_struct.position_body = translate_PositionBody_to_c(cpp_struct.position_body);
    c_struct.q = translate_Quaternion_to_c(cpp_struct.q);
    c_struct.speed_body = translate_SpeedBody_to_c(cpp_struct.speed_body);
    c_struct.angular_velocity_body = translate_AngularVelocityBody_to_c(cpp_struct.angular_velocity_body);
    c_struct.pose_covariance = translate_Covariance_to_c(cpp_struct.pose_covariance);
    c_struct.velocity_covariance = translate_Covariance_to_c(cpp_struct.velocity_covariance);
    return c_struct;
}

void mavsdk_mocap_Odometry_destroy(
    mavsdk_mocap_Odometry_t* target) {
    if (!target) return;
}

void mavsdk_mocap_Odometry_array_destroy(
    mavsdk_mocap_Odometry_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mocap_Odometry_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}



// ===== Primitive Array Destroy Functions =====
void mavsdk_mocap_float_array_destroy(float** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_double_array_destroy(double** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_int32t_array_destroy(int32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_uint32t_array_destroy(uint32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_int64t_array_destroy(int64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_uint64t_array_destroy(uint64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mocap_bool_array_destroy(bool** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}


void mavsdk_mocap_string_destroy(char** str) {
    if (!str || !*str) return;
    free(*str);
    *str = nullptr;
}

void mavsdk_mocap_byte_buffer_destroy(uint8_t** buffer) {
    if (!buffer || !*buffer) return;
    delete[] *buffer;
    *buffer = nullptr;
}

// ===== Mocap Wrapper =====

struct mavsdk_mocap_wrapper {
    std::shared_ptr<mavsdk::Mocap> cpp_plugin;
};

mavsdk_mocap_t
mavsdk_mocap_create(mavsdk_system_t system) {
    if (system == nullptr) {
        return nullptr;
    }

    auto wrapper = new mavsdk_mocap_wrapper();
    auto system_ptr = static_cast<std::shared_ptr<mavsdk::System>*>(system);
    wrapper->cpp_plugin = std::make_shared<mavsdk::Mocap>(*system_ptr);

    return wrapper;
}

void mavsdk_mocap_destroy(mavsdk_mocap_t mocap) {
    if (mocap == nullptr) {
        return;
    }

    auto wrapper = static_cast<mavsdk_mocap_wrapper*>(mocap);
    delete wrapper;
}

// ===== Method Implementations =====


// SetVisionPositionEstimate sync
mavsdk_mocap_result_t
mavsdk_mocap_set_vision_position_estimate(
    mavsdk_mocap_t mocap,
    mavsdk_mocap_VisionPositionEstimate_t vision_position_estimate)
{
    auto wrapper = static_cast<mavsdk_mocap_wrapper*>(mocap);

    auto ret_value = wrapper->cpp_plugin->set_vision_position_estimate(        translate_VisionPositionEstimate_from_c(vision_position_estimate));

    return translate_result(ret_value);
}


// SetVisionSpeedEstimate sync
mavsdk_mocap_result_t
mavsdk_mocap_set_vision_speed_estimate(
    mavsdk_mocap_t mocap,
    mavsdk_mocap_VisionSpeedEstimate_t vision_speed_estimate)
{
    auto wrapper = static_cast<mavsdk_mocap_wrapper*>(mocap);

    auto ret_value = wrapper->cpp_plugin->set_vision_speed_estimate(        translate_VisionSpeedEstimate_from_c(vision_speed_estimate));

    return translate_result(ret_value);
}


// SetAttitudePositionMocap sync
mavsdk_mocap_result_t
mavsdk_mocap_set_attitude_position_mocap(
    mavsdk_mocap_t mocap,
    mavsdk_mocap_AttitudePositionMocap_t attitude_position_mocap)
{
    auto wrapper = static_cast<mavsdk_mocap_wrapper*>(mocap);

    auto ret_value = wrapper->cpp_plugin->set_attitude_position_mocap(        translate_AttitudePositionMocap_from_c(attitude_position_mocap));

    return translate_result(ret_value);
}


// SetOdometry sync
mavsdk_mocap_result_t
mavsdk_mocap_set_odometry(
    mavsdk_mocap_t mocap,
    mavsdk_mocap_Odometry_t odometry)
{
    auto wrapper = static_cast<mavsdk_mocap_wrapper*>(mocap);

    auto ret_value = wrapper->cpp_plugin->set_odometry(        translate_Odometry_from_c(odometry));

    return translate_result(ret_value);
}
