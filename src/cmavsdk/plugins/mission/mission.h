// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/mission/mission.proto)

#ifndef CMAVSDK_MISSION_H
#define CMAVSDK_MISSION_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Enable waypoint missions.
 */

// ===== Forward Declarations =====
typedef void* mavsdk_system_t;

// ===== Opaque Handles =====
typedef void* mavsdk_mission_t;
typedef void* mavsdk_mission_upload_mission_with_progress_handle_t;
typedef void* mavsdk_mission_download_mission_with_progress_handle_t;
typedef void* mavsdk_mission_mission_progress_handle_t;

// ===== Enums =====

// ===== Structs =====
/**
 * @brief Possible camera actions at a mission item.
 */
typedef enum {
    /**  No action. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_NONE = 0,
    /**  Take a single photo. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_TAKE_PHOTO = 1,
    /**  Start capturing photos at regular intervals. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_INTERVAL = 2,
    /**  Stop capturing photos at regular intervals. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_INTERVAL = 3,
    /**  Start capturing video. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_VIDEO = 4,
    /**  Stop capturing video. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_VIDEO = 5,
    /**  Start capturing photos at regular distance. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_DISTANCE = 6,
    /**  Stop capturing photos at regular distance. */
    MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_DISTANCE = 7,
} mavsdk_mission_mission_item_camera_action_t;

/**
 * @brief Possible vehicle actions at a mission item
 */
typedef enum {
    /**  No action. */
    MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_NONE = 0,
    /**  Vehicle will takeoff and go to defined waypoint. */
    MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TAKEOFF = 1,
    /**  When a waypoint is reached vehicle will land at current position. */
    MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_LAND = 2,
    /**  When a waypoint is reached vehicle will transition to fixed-wing mode. */
    MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_FW = 3,
    /**  When a waypoint is reached vehicle will transition to multi-copter mode. */
    MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_MC = 4,
} mavsdk_mission_mission_item_vehicle_action_t;

/**
 * @brief Type representing a mission item.
 * 
 *  A MissionItem can contain a position and/or actions.
 *  Mission items are building blocks to assemble a mission,
 *  which can be sent to (or received from) a system.
 *  They cannot be used independently.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_mission_mission_item_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Latitude in degrees (range: -90 to +90) */
    double latitude_deg;
    /**  Longitude in degrees (range: -180 to +180) */
    double longitude_deg;
    /**  Altitude relative to takeoff altitude in metres */
    float relative_altitude_m;
    /**  Speed to use after this mission item (in metres/second) */
    float speed_m_s;
    /**  True will make the drone fly through without stopping, while false will make the drone stop on the waypoint */
    bool is_fly_through;
    /**  Gimbal pitch (in degrees) */
    float gimbal_pitch_deg;
    /**  Gimbal yaw (in degrees) */
    float gimbal_yaw_deg;
    /**  Camera action to trigger at this mission item */
    mavsdk_mission_mission_item_camera_action_t camera_action;
    /**  Loiter time (in seconds) */
    float loiter_time_s;
    /**  Camera photo interval to use after this mission item (in seconds) */
    double camera_photo_interval_s;
    /**  Radius for completing a mission item (in metres) */
    float acceptance_radius_m;
    /**  Absolute yaw angle (in degrees) */
    float yaw_deg;
    /**  Camera photo distance to use after this mission item (in meters) */
    float camera_photo_distance_m;
    /**  Vehicle action to trigger at this mission item. */
    mavsdk_mission_mission_item_vehicle_action_t vehicle_action;
} mavsdk_mission_mission_item_t;

/**
 * @brief Destroy a mission_item struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_item_destroy(
    mavsdk_mission_mission_item_t* target);

/**
 * @brief Destroy an array of mission_item structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_item_array_destroy(
    mavsdk_mission_mission_item_t** array,
    size_t size);

/**
 * @brief Mission plan type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_mission_mission_plan_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  The mission items */
    mavsdk_mission_mission_item_t* mission_items;
    size_t mission_items_size;
} mavsdk_mission_mission_plan_t;

/**
 * @brief Destroy a mission_plan struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_plan_destroy(
    mavsdk_mission_mission_plan_t* target);

/**
 * @brief Destroy an array of mission_plan structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_plan_array_destroy(
    mavsdk_mission_mission_plan_t** array,
    size_t size);

/**
 * @brief Mission progress type.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_mission_mission_progress_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Current mission item index (0-based), if equal to total, the mission is finished */
    int32_t current;
    /**  Total number of mission items */
    int32_t total;
} mavsdk_mission_mission_progress_t;

/**
 * @brief Destroy a mission_progress struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_progress_destroy(
    mavsdk_mission_mission_progress_t* target);

/**
 * @brief Destroy an array of mission_progress structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_mission_mission_progress_array_destroy(
    mavsdk_mission_mission_progress_t** array,
    size_t size);

/**
 * @brief Possible results returned for action requests.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_MISSION_RESULT_UNKNOWN = 0,
    /**  Request succeeded. */
    MAVSDK_MISSION_RESULT_SUCCESS = 1,
    /**  Error. */
    MAVSDK_MISSION_RESULT_ERROR = 2,
    /**  Too many mission items in the mission. */
    MAVSDK_MISSION_RESULT_TOO_MANY_MISSION_ITEMS = 3,
    /**  Vehicle is busy. */
    MAVSDK_MISSION_RESULT_BUSY = 4,
    /**  Request timed out. */
    MAVSDK_MISSION_RESULT_TIMEOUT = 5,
    /**  Invalid argument. */
    MAVSDK_MISSION_RESULT_INVALID_ARGUMENT = 6,
    /**  Mission downloaded from the system is not supported. */
    MAVSDK_MISSION_RESULT_UNSUPPORTED = 7,
    /**  No mission available on the system. */
    MAVSDK_MISSION_RESULT_NO_MISSION_AVAILABLE = 8,
    /**  Unsupported mission command. */
    MAVSDK_MISSION_RESULT_UNSUPPORTED_MISSION_CMD = 9,
    /**  Mission transfer (upload or download) has been cancelled. */
    MAVSDK_MISSION_RESULT_TRANSFER_CANCELLED = 10,
    /**  No system connected. */
    MAVSDK_MISSION_RESULT_NO_SYSTEM = 11,
    /**  Intermediate message showing progress. */
    MAVSDK_MISSION_RESULT_NEXT = 12,
    /**  Request denied. */
    MAVSDK_MISSION_RESULT_DENIED = 13,
    /**  There was a protocol error. */
    MAVSDK_MISSION_RESULT_PROTOCOL_ERROR = 14,
    /**  The system does not support the MISSION_INT protocol. */
    MAVSDK_MISSION_RESULT_INT_MESSAGES_NOT_SUPPORTED = 15,
} mavsdk_mission_result_t;


/**
 * @brief Progress data coming from mission upload.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_mission_progress_data_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Progress (0..1.0) */
    float progress;
} mavsdk_mission_progress_data_t;

/**
 * @brief Destroy a progress_data struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_mission_progress_data_destroy(
    mavsdk_mission_progress_data_t* target);

/**
 * @brief Destroy an array of progress_data structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_mission_progress_data_array_destroy(
    mavsdk_mission_progress_data_t** array,
    size_t size);

/**
 * @brief Progress data coming from mission download, or the mission itself (if the transfer succeeds).
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_mission_progress_data_or_mission_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Whether this ProgressData contains a 'progress' status or not */
    bool has_progress;
    /**  Progress (0..1.0) */
    float progress;
    /**  Whether this ProgressData contains a 'mission_plan' or not */
    bool has_mission;
    /**  Mission plan */
    mavsdk_mission_mission_plan_t mission_plan;
} mavsdk_mission_progress_data_or_mission_t;

/**
 * @brief Destroy a progress_data_or_mission struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_mission_progress_data_or_mission_destroy(
    mavsdk_mission_progress_data_or_mission_t* target);

/**
 * @brief Destroy an array of progress_data_or_mission structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_mission_progress_data_or_mission_array_destroy(
    mavsdk_mission_progress_data_or_mission_t** array,
    size_t size);


// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_mission_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_mission_upload_mission_callback_t)(const mavsdk_mission_result_t result, void* user_data);
typedef void (*mavsdk_mission_upload_mission_with_progress_callback_t)(const mavsdk_mission_result_t result, const mavsdk_mission_progress_data_t progress_data, void* user_data);
typedef void (*mavsdk_mission_download_mission_callback_t)(const mavsdk_mission_result_t result, const mavsdk_mission_mission_plan_t mission_plan, void* user_data);
typedef void (*mavsdk_mission_download_mission_with_progress_callback_t)(const mavsdk_mission_result_t result, const mavsdk_mission_progress_data_or_mission_t progress_data, void* user_data);
typedef void (*mavsdk_mission_start_mission_callback_t)(const mavsdk_mission_result_t result, void* user_data);
typedef void (*mavsdk_mission_pause_mission_callback_t)(const mavsdk_mission_result_t result, void* user_data);
typedef void (*mavsdk_mission_clear_mission_callback_t)(const mavsdk_mission_result_t result, void* user_data);
typedef void (*mavsdk_mission_set_current_mission_item_callback_t)(const mavsdk_mission_result_t result, void* user_data);
typedef void (*mavsdk_mission_mission_progress_callback_t)(const mavsdk_mission_mission_progress_t mission_progress, void* user_data);

// ===== Mission Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_mission_t mavsdk_mission_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_mission_destroy(mavsdk_mission_t mission);

// ===== Methods =====

/**
 * @brief Upload a list of mission items to the system.
 * 
 *  The mission items are uploaded to a drone. Once uploaded the mission can be started and
 *  executed even if the connection is lost.
 *
 * @param mission The mission instance.
* @param mission_plan  The mission plan
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_upload_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan,
    mavsdk_mission_upload_mission_callback_t callback,
    void* user_data);


/**
 * @brief Get the current upload mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param upload_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_upload_mission(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan);


/**
 * @brief Upload a list of mission items to the system and report upload progress.
 * 
 *  The mission items are uploaded to a drone. Once uploaded the mission can be started and
 *  executed even if the connection is lost.
 *
 * @param mission The mission instance.
* @param mission_plan  The mission plan
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_upload_mission_with_progress_async(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan,
    mavsdk_mission_upload_mission_with_progress_callback_t callback,
    void* user_data);



/**
 * @brief Get the current cancel mission upload (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param cancel_mission_upload_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_cancel_mission_upload(
    mavsdk_mission_t mission);


/**
 * @brief Download a list of mission items from the system (asynchronous).
 * 
 *  Will fail if any of the downloaded mission items are not supported
 *  by the MAVSDK API.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_download_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_download_mission_callback_t callback,
    void* user_data);


/**
 * @brief Get the current download mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param download_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_download_mission(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t* mission_plan_out);


/**
 * @brief Download a list of mission items from the system (asynchronous) and report progress.
 * 
 *  Will fail if any of the downloaded mission items are not supported
 *  by the MAVSDK API.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_download_mission_with_progress_async(
    mavsdk_mission_t mission,
    mavsdk_mission_download_mission_with_progress_callback_t callback,
    void* user_data);



/**
 * @brief Get the current cancel mission download (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param cancel_mission_download_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_cancel_mission_download(
    mavsdk_mission_t mission);


/**
 * @brief Start the mission.
 * 
 *  A mission must be uploaded to the vehicle before this can be called.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_start_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_start_mission_callback_t callback,
    void* user_data);


/**
 * @brief Get the current start mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param start_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_start_mission(
    mavsdk_mission_t mission);


/**
 * @brief Pause the mission.
 * 
 *  Pausing the mission puts the vehicle into
 *  [HOLD mode](https://docs.px4.io/en/flight_modes/hold.html).
 *  A multicopter should just hover at the spot while a fixedwing vehicle should loiter
 *  around the location where it paused.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_pause_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_pause_mission_callback_t callback,
    void* user_data);


/**
 * @brief Get the current pause mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param pause_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_pause_mission(
    mavsdk_mission_t mission);


/**
 * @brief Clear the mission saved on the vehicle.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_clear_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_clear_mission_callback_t callback,
    void* user_data);


/**
 * @brief Get the current clear mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param clear_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_clear_mission(
    mavsdk_mission_t mission);


/**
 * @brief Sets the mission item index to go to.
 * 
 *  By setting the current index to 0, the mission is restarted from the beginning. If it is set
 *  to a specific index of a mission item, the mission will be set to this item.
 * 
 *  Note that this is not necessarily true for general missions using MAVLink if loop counters
 *  are used.
 *
 * @param mission The mission instance.
* @param index  Index of the mission item to be set as the next one (0-based)
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_mission_set_current_mission_item_async(
    mavsdk_mission_t mission,
    int32_t index,
    mavsdk_mission_set_current_mission_item_callback_t callback,
    void* user_data);


/**
 * @brief Get the current set current mission item (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_current_mission_item_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_set_current_mission_item(
    mavsdk_mission_t mission,
    int32_t index);


/**
 * @brief Get the current is mission finished (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param is_mission_finished_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_is_mission_finished(
    mavsdk_mission_t mission,
    bool* is_finished_out);


/**
 * @brief Subscribe to mission progress updates.
 *
 * @param mission The mission instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_mission_unsubscribe_mission_progress() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_mission_mission_progress_handle_t mavsdk_mission_subscribe_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'mission_progress' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param mission The mission instance.
 * @param handle The subscription handle returned by mavsdk_mission_subscribe_mission_progress().
 */
CMAVSDK_EXPORT void mavsdk_mission_unsubscribe_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_handle_t);

/**
 * @brief Get the current mission progress (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param mission_progress_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_mission_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_t* mission_progress_out);


/**
 * @brief Get the current get return to launch after mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_return_to_launch_after_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_get_return_to_launch_after_mission(
    mavsdk_mission_t mission,
    bool* enable_out);


/**
 * @brief Get the current set return to launch after mission (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_return_to_launch_after_mission_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_mission_result_t
mavsdk_mission_set_return_to_launch_after_mission(
    mavsdk_mission_t mission,
    bool enable);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_MISSION_H