// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/action_server/action_server.proto)

#ifndef CMAVSDK_ACTION_SERVER_H
#define CMAVSDK_ACTION_SERVER_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Provide vehicle actions (as a server) such as arming, taking off, and landing.
 */

// ===== Forward Declarations =====
typedef void* mavsdk_server_component_t;

// ===== Opaque Handles =====
typedef void* mavsdk_action_server_t;
typedef void* mavsdk_action_server_arm_disarm_handle_t;
typedef void* mavsdk_action_server_flight_mode_change_handle_t;
typedef void* mavsdk_action_server_takeoff_handle_t;
typedef void* mavsdk_action_server_land_handle_t;
typedef void* mavsdk_action_server_reboot_handle_t;
typedef void* mavsdk_action_server_shutdown_handle_t;
typedef void* mavsdk_action_server_terminate_handle_t;

// ===== Enums =====
/**
 * @brief Flight modes.
 *
 * For more information about flight modes, check out
 * https://docs.px4.io/master/en/config/flight_mode.html.
 */
typedef enum {
    /**  Mode not known. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_UNKNOWN = 0,
    /**  Armed and ready to take off. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_READY = 1,
    /**  Taking off. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_TAKEOFF = 2,
    /**  Holding (hovering in place (or circling for fixed-wing vehicles). */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_HOLD = 3,
    /**  In mission. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_MISSION = 4,
    /**  Returning to launch position (then landing). */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_RETURN_TO_LAUNCH = 5,
    /**  Landing. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_LAND = 6,
    /**  In 'offboard' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_OFFBOARD = 7,
    /**  In 'follow-me' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_FOLLOW_ME = 8,
    /**  In 'Manual' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_MANUAL = 9,
    /**  In 'Altitude Control' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_ALTCTL = 10,
    /**  In 'Position Control' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_POSCTL = 11,
    /**  In 'Acro' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_ACRO = 12,
    /**  In 'Stabilize' mode. */
    MAVSDK_ACTION_SERVER_FLIGHT_MODE_STABILIZED = 13,
} mavsdk_action_server_flight_mode_t;


// ===== Structs =====
/**
 * @brief State to check if the vehicle can transition to
 *  respective flightmodes
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_action_server_allowable_flight_modes_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Auto/mission mode */
    bool can_auto_mode;
    /**  Guided mode */
    bool can_guided_mode;
    /**  Stabilize mode */
    bool can_stabilize_mode;
    /**  Auto RTL mode */
    bool can_auto_rtl_mode;
    /**  Auto takeoff mode */
    bool can_auto_takeoff_mode;
    /**  Auto land mode */
    bool can_auto_land_mode;
    /**  Auto hold/loiter mode */
    bool can_auto_loiter_mode;
} mavsdk_action_server_allowable_flight_modes_t;

/**
 * @brief Destroy a allowable_flight_modes struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_action_server_allowable_flight_modes_destroy(
    mavsdk_action_server_allowable_flight_modes_t* target);

/**
 * @brief Destroy an array of allowable_flight_modes structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_action_server_allowable_flight_modes_array_destroy(
    mavsdk_action_server_allowable_flight_modes_t** array,
    size_t size);

/**
 * @brief Arming message type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_action_server_arm_disarm_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Should vehicle arm */
    bool arm;
    /**  Should arm override pre-flight checks */
    bool force;
} mavsdk_action_server_arm_disarm_t;

/**
 * @brief Destroy a arm_disarm struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_action_server_arm_disarm_destroy(
    mavsdk_action_server_arm_disarm_t* target);

/**
 * @brief Destroy an array of arm_disarm structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_action_server_arm_disarm_array_destroy(
    mavsdk_action_server_arm_disarm_t** array,
    size_t size);

/**
 * @brief Possible results returned for action requests.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_ACTION_SERVER_RESULT_UNKNOWN = 0,
    /**  Request was successful. */
    MAVSDK_ACTION_SERVER_RESULT_SUCCESS = 1,
    /**  No system is connected. */
    MAVSDK_ACTION_SERVER_RESULT_NO_SYSTEM = 2,
    /**  Connection error. */
    MAVSDK_ACTION_SERVER_RESULT_CONNECTION_ERROR = 3,
    /**  Vehicle is busy. */
    MAVSDK_ACTION_SERVER_RESULT_BUSY = 4,
    /**  Command refused by vehicle. */
    MAVSDK_ACTION_SERVER_RESULT_COMMAND_DENIED = 5,
    /**  Command refused because landed state is unknown. */
    MAVSDK_ACTION_SERVER_RESULT_COMMAND_DENIED_LANDED_STATE_UNKNOWN = 6,
    /**  Command refused because vehicle not landed. */
    MAVSDK_ACTION_SERVER_RESULT_COMMAND_DENIED_NOT_LANDED = 7,
    /**  Request timed out. */
    MAVSDK_ACTION_SERVER_RESULT_TIMEOUT = 8,
    /**  Hybrid/VTOL transition support is unknown. */
    MAVSDK_ACTION_SERVER_RESULT_VTOL_TRANSITION_SUPPORT_UNKNOWN = 9,
    /**  Vehicle does not support hybrid/VTOL transitions. */
    MAVSDK_ACTION_SERVER_RESULT_NO_VTOL_TRANSITION_SUPPORT = 10,
    /**  Error getting or setting parameter. */
    MAVSDK_ACTION_SERVER_RESULT_PARAMETER_ERROR = 11,
    /**  Intermediate message showing progress or instructions on the next steps. */
    MAVSDK_ACTION_SERVER_RESULT_NEXT = 12,
} mavsdk_action_server_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_action_server_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_action_server_arm_disarm_callback_t)(const mavsdk_action_server_result_t result, const mavsdk_action_server_arm_disarm_t arm, void* user_data);
typedef void (*mavsdk_action_server_flight_mode_change_callback_t)(const mavsdk_action_server_result_t result, const mavsdk_action_server_flight_mode_t flight_mode, void* user_data);
typedef void (*mavsdk_action_server_takeoff_callback_t)(const mavsdk_action_server_result_t result, const bool takeoff, void* user_data);
typedef void (*mavsdk_action_server_land_callback_t)(const mavsdk_action_server_result_t result, const bool land, void* user_data);
typedef void (*mavsdk_action_server_reboot_callback_t)(const mavsdk_action_server_result_t result, const bool reboot, void* user_data);
typedef void (*mavsdk_action_server_shutdown_callback_t)(const mavsdk_action_server_result_t result, const bool shutdown, void* user_data);
typedef void (*mavsdk_action_server_terminate_callback_t)(const mavsdk_action_server_result_t result, const bool terminate, void* user_data);

// ===== ActionServer Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_action_server_t mavsdk_action_server_create(mavsdk_server_component_t server_component);
CMAVSDK_EXPORT void mavsdk_action_server_destroy(mavsdk_action_server_t action_server);

// ===== Methods =====

/**
 * @brief Subscribe to ARM/DISARM commands
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_arm_disarm() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_arm_disarm_handle_t mavsdk_action_server_subscribe_arm_disarm(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_arm_disarm_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'arm_disarm' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_arm_disarm().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_arm_disarm(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_arm_disarm_handle_t);


/**
 * @brief Subscribe to DO_SET_MODE
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_flight_mode_change() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_flight_mode_change_handle_t mavsdk_action_server_subscribe_flight_mode_change(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_flight_mode_change_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'flight_mode_change' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_flight_mode_change().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_flight_mode_change(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_flight_mode_change_handle_t);


/**
 * @brief Subscribe to takeoff command
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_takeoff() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_takeoff_handle_t mavsdk_action_server_subscribe_takeoff(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_takeoff_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'takeoff' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_takeoff().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_takeoff(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_takeoff_handle_t);


/**
 * @brief Subscribe to land command
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_land() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_land_handle_t mavsdk_action_server_subscribe_land(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_land_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'land' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_land().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_land(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_land_handle_t);


/**
 * @brief Subscribe to reboot command
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_reboot() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_reboot_handle_t mavsdk_action_server_subscribe_reboot(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_reboot_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'reboot' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_reboot().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_reboot(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_reboot_handle_t);


/**
 * @brief Subscribe to shutdown command
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_shutdown() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_shutdown_handle_t mavsdk_action_server_subscribe_shutdown(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_shutdown_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'shutdown' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_shutdown().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_shutdown(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_shutdown_handle_t);


/**
 * @brief Subscribe to terminate command
 *
 * @param action_server The action_server instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_action_server_unsubscribe_terminate() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_action_server_terminate_handle_t mavsdk_action_server_subscribe_terminate(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_terminate_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'terminate' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param action_server The action_server instance.
 * @param handle The subscription handle returned by mavsdk_action_server_subscribe_terminate().
 */
CMAVSDK_EXPORT void mavsdk_action_server_unsubscribe_terminate(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_terminate_handle_t);


/**
 * @brief Get the current set allow takeoff (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_allow_takeoff_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_allow_takeoff(
    mavsdk_action_server_t action_server,
    bool allow_takeoff);


/**
 * @brief Get the current set armable (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_armable_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_armable(
    mavsdk_action_server_t action_server,
    bool armable,
    bool force_armable);


/**
 * @brief Get the current set disarmable (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_disarmable_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_disarmable(
    mavsdk_action_server_t action_server,
    bool disarmable,
    bool force_disarmable);


/**
 * @brief Get the current set allowable flight modes (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_allowable_flight_modes_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_allowable_flight_modes(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_allowable_flight_modes_t flight_modes);


/**
 * @brief Get the current get allowable flight modes (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_allowable_flight_modes_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_action_server_get_allowable_flight_modes(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_allowable_flight_modes_t* flight_modes_out);


/**
 * @brief Get the current set armed state (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_armed_state_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_armed_state(
    mavsdk_action_server_t action_server,
    bool is_armed);


/**
 * @brief Get the current set flight mode (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_flight_mode_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_flight_mode(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_flight_mode_t flight_mode);


/**
 * @brief Get the current set flight mode internal (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_flight_mode_internal_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_action_server_result_t
mavsdk_action_server_set_flight_mode_internal(
    mavsdk_action_server_t action_server,
    mavsdk_action_server_flight_mode_t flight_mode);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_ACTION_SERVER_H