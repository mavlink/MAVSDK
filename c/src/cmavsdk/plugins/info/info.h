// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/info/info.proto)

#ifndef CMAVSDK_INFO_H
#define CMAVSDK_INFO_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Provide information about the hardware and/or software of a system.
 */

// ===== Forward Declarations =====
typedef struct mavsdk_system_s *mavsdk_system_t;

// ===== Opaque Handles =====
typedef struct mavsdk_info_s *mavsdk_info_t;
typedef struct mavsdk_info_flight_information_handle_s *mavsdk_info_flight_information_handle_t;

// ===== Enums =====

// ===== Structs =====
/**
 * @brief System flight information.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_info_flight_info_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Time since system boot */
    uint32_t time_boot_ms;
    /**  Flight counter. Starts from zero, is incremented at every disarm and is never reset (even after reboot) */
    uint64_t flight_uid;
    /**  Duration since arming in milliseconds */
    uint32_t duration_since_arming_ms;
    /**  Duration since takeoff in milliseconds */
    uint32_t duration_since_takeoff_ms;
} mavsdk_info_flight_info_t;

/**
 * @brief Destroy a flight_info struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_info_flight_info_destroy(
    mavsdk_info_flight_info_t* target);

/**
 * @brief Destroy an array of flight_info structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_info_flight_info_array_destroy(
    mavsdk_info_flight_info_t** array,
    size_t size);

/**
 * @brief System identification.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_info_identification_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  UID of the hardware. This refers to uid2 of MAVLink. If the system does not support uid2 yet, this is all zeros. */
    char* hardware_uid;
    /**  Legacy UID of the hardware, referred to as uid in MAVLink (formerly exposed during system discovery as UUID). */
    uint64_t legacy_uid;
} mavsdk_info_identification_t;

/**
 * @brief Destroy a identification struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_info_identification_destroy(
    mavsdk_info_identification_t* target);

/**
 * @brief Destroy an array of identification structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_info_identification_array_destroy(
    mavsdk_info_identification_t** array,
    size_t size);

/**
 * @brief System product information.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_info_product_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  ID of the board vendor */
    int32_t vendor_id;
    /**  Name of the vendor */
    char* vendor_name;
    /**  ID of the product */
    int32_t product_id;
    /**  Name of the product */
    char* product_name;
} mavsdk_info_product_t;

/**
 * @brief Destroy a product struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_info_product_destroy(
    mavsdk_info_product_t* target);

/**
 * @brief Destroy an array of product structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_info_product_array_destroy(
    mavsdk_info_product_t** array,
    size_t size);

/**
 * @brief These values define the type of firmware/flight software release
 */
typedef enum {
    /**  Unknown type. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_UNKNOWN = 0,
    /**  Development release. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_DEV = 1,
    /**  Alpha release. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_ALPHA = 2,
    /**  Beta release. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_BETA = 3,
    /**  Release candidate. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_RC = 4,
    /**  Official stable release. */
    MAVSDK_INFO_VERSION_FLIGHT_SOFTWARE_VERSION_TYPE_RELEASE = 5,
} mavsdk_info_version_flight_software_version_type_t;

/**
 * @brief System version information.
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_info_version_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Flight software major version */
    int32_t flight_sw_major;
    /**  Flight software minor version */
    int32_t flight_sw_minor;
    /**  Flight software patch version */
    int32_t flight_sw_patch;
    /**  Flight software vendor major version */
    int32_t flight_sw_vendor_major;
    /**  Flight software vendor minor version */
    int32_t flight_sw_vendor_minor;
    /**  Flight software vendor patch version */
    int32_t flight_sw_vendor_patch;
    /**  Operating system software major version */
    int32_t os_sw_major;
    /**  Operating system software minor version */
    int32_t os_sw_minor;
    /**  Operating system software patch version */
    int32_t os_sw_patch;
    /**  Flight software git hash */
    char* flight_sw_git_hash;
    /**  Operating system software git hash */
    char* os_sw_git_hash;
    /**  Flight software version type */
    mavsdk_info_version_flight_software_version_type_t flight_sw_version_type;
} mavsdk_info_version_t;

/**
 * @brief Destroy a version struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_info_version_destroy(
    mavsdk_info_version_t* target);

/**
 * @brief Destroy an array of version structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_info_version_array_destroy(
    mavsdk_info_version_t** array,
    size_t size);

/**
 * @brief Possible results returned for info requests.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_INFO_RESULT_UNKNOWN = 0,
    /**  Request succeeded. */
    MAVSDK_INFO_RESULT_SUCCESS = 1,
    /**  Information has not been received yet. */
    MAVSDK_INFO_RESULT_INFORMATION_NOT_RECEIVED_YET = 2,
    /**  No system is connected. */
    MAVSDK_INFO_RESULT_NO_SYSTEM = 3,
} mavsdk_info_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_info_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_info_flight_information_callback_t)(const mavsdk_info_flight_info_t flight_info, void* user_data);

// ===== Info Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_info_t mavsdk_info_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_info_destroy(mavsdk_info_t info);

// ===== Methods =====

/**
 * @brief Get the current get flight information (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_flight_information_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_info_result_t
mavsdk_info_get_flight_information(
    mavsdk_info_t info,
    mavsdk_info_flight_info_t* flight_info_out);


/**
 * @brief Get the current get identification (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_identification_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_info_result_t
mavsdk_info_get_identification(
    mavsdk_info_t info,
    mavsdk_info_identification_t* identification_out);


/**
 * @brief Get the current get product (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_product_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_info_result_t
mavsdk_info_get_product(
    mavsdk_info_t info,
    mavsdk_info_product_t* product_out);


/**
 * @brief Get the current get version (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_version_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_info_result_t
mavsdk_info_get_version(
    mavsdk_info_t info,
    mavsdk_info_version_t* version_out);


/**
 * @brief Get the current get speed factor (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_speed_factor_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_info_result_t
mavsdk_info_get_speed_factor(
    mavsdk_info_t info,
    double* speed_factor_out);


/**
 * @brief Subscribe to 'flight information' updates.
 *
 * @param info The info instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_info_unsubscribe_flight_information() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_info_flight_information_handle_t mavsdk_info_subscribe_flight_information(
    mavsdk_info_t info,
    mavsdk_info_flight_information_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'flight_information' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param info The info instance.
 * @param handle The subscription handle returned by mavsdk_info_subscribe_flight_information().
 */
CMAVSDK_EXPORT void mavsdk_info_unsubscribe_flight_information(
    mavsdk_info_t info,
    mavsdk_info_flight_information_handle_t);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_INFO_H