// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/mission/mission.proto)

#include "mission.h"

#include <mavsdk/plugins/mission/mission.h>
#include <cstring>
#include <vector>

// ===== C++ to C Type Conversions =====

static mavsdk_mission_result_t
translate_result(mavsdk::Mission::Result cpp_result) {
    switch(cpp_result) {
        case mavsdk::Mission::Result::Unknown:
            return MAVSDK_MISSION_RESULT_UNKNOWN;
        case mavsdk::Mission::Result::Success:
            return MAVSDK_MISSION_RESULT_SUCCESS;
        case mavsdk::Mission::Result::Error:
            return MAVSDK_MISSION_RESULT_ERROR;
        case mavsdk::Mission::Result::TooManyMissionItems:
            return MAVSDK_MISSION_RESULT_TOO_MANY_MISSION_ITEMS;
        case mavsdk::Mission::Result::Busy:
            return MAVSDK_MISSION_RESULT_BUSY;
        case mavsdk::Mission::Result::Timeout:
            return MAVSDK_MISSION_RESULT_TIMEOUT;
        case mavsdk::Mission::Result::InvalidArgument:
            return MAVSDK_MISSION_RESULT_INVALID_ARGUMENT;
        case mavsdk::Mission::Result::Unsupported:
            return MAVSDK_MISSION_RESULT_UNSUPPORTED;
        case mavsdk::Mission::Result::NoMissionAvailable:
            return MAVSDK_MISSION_RESULT_NO_MISSION_AVAILABLE;
        case mavsdk::Mission::Result::UnsupportedMissionCmd:
            return MAVSDK_MISSION_RESULT_UNSUPPORTED_MISSION_CMD;
        case mavsdk::Mission::Result::TransferCancelled:
            return MAVSDK_MISSION_RESULT_TRANSFER_CANCELLED;
        case mavsdk::Mission::Result::NoSystem:
            return MAVSDK_MISSION_RESULT_NO_SYSTEM;
        case mavsdk::Mission::Result::Next:
            return MAVSDK_MISSION_RESULT_NEXT;
        case mavsdk::Mission::Result::Denied:
            return MAVSDK_MISSION_RESULT_DENIED;
        case mavsdk::Mission::Result::ProtocolError:
            return MAVSDK_MISSION_RESULT_PROTOCOL_ERROR;
        case mavsdk::Mission::Result::IntMessagesNotSupported:
            return MAVSDK_MISSION_RESULT_INT_MESSAGES_NOT_SUPPORTED;
    }
}



static mavsdk::Mission::MissionItem::CameraAction
translate_mission_item_camera_action_from_c(mavsdk_mission_mission_item_camera_action_t c_enum) {
    switch(c_enum) {
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_NONE:
            return mavsdk::Mission::MissionItem::CameraAction::None;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_TAKE_PHOTO:
            return mavsdk::Mission::MissionItem::CameraAction::TakePhoto;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_INTERVAL:
            return mavsdk::Mission::MissionItem::CameraAction::StartPhotoInterval;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_INTERVAL:
            return mavsdk::Mission::MissionItem::CameraAction::StopPhotoInterval;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_VIDEO:
            return mavsdk::Mission::MissionItem::CameraAction::StartVideo;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_VIDEO:
            return mavsdk::Mission::MissionItem::CameraAction::StopVideo;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_DISTANCE:
            return mavsdk::Mission::MissionItem::CameraAction::StartPhotoDistance;
        case MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_DISTANCE:
            return mavsdk::Mission::MissionItem::CameraAction::StopPhotoDistance;
    }
    return mavsdk::Mission::MissionItem::CameraAction::None;
}


static mavsdk::Mission::MissionItem::VehicleAction
translate_mission_item_vehicle_action_from_c(mavsdk_mission_mission_item_vehicle_action_t c_enum) {
    switch(c_enum) {
        case MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_NONE:
            return mavsdk::Mission::MissionItem::VehicleAction::None;
        case MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TAKEOFF:
            return mavsdk::Mission::MissionItem::VehicleAction::Takeoff;
        case MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_LAND:
            return mavsdk::Mission::MissionItem::VehicleAction::Land;
        case MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_FW:
            return mavsdk::Mission::MissionItem::VehicleAction::TransitionToFw;
        case MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_MC:
            return mavsdk::Mission::MissionItem::VehicleAction::TransitionToMc;
    }
    return mavsdk::Mission::MissionItem::VehicleAction::None;
}


static mavsdk::Mission::MissionItem
translate_mission_item_from_c(const mavsdk_mission_mission_item_t& c_struct) {
    mavsdk::Mission::MissionItem cpp_struct{};
    cpp_struct.latitude_deg = c_struct.latitude_deg;
    cpp_struct.longitude_deg = c_struct.longitude_deg;
    cpp_struct.relative_altitude_m = c_struct.relative_altitude_m;
    cpp_struct.speed_m_s = c_struct.speed_m_s;
    cpp_struct.is_fly_through = c_struct.is_fly_through;
    cpp_struct.gimbal_pitch_deg = c_struct.gimbal_pitch_deg;
    cpp_struct.gimbal_yaw_deg = c_struct.gimbal_yaw_deg;
    cpp_struct.camera_action = translate_mission_item_camera_action_from_c(c_struct.camera_action);
    cpp_struct.loiter_time_s = c_struct.loiter_time_s;
    cpp_struct.camera_photo_interval_s = c_struct.camera_photo_interval_s;
    cpp_struct.acceptance_radius_m = c_struct.acceptance_radius_m;
    cpp_struct.yaw_deg = c_struct.yaw_deg;
    cpp_struct.camera_photo_distance_m = c_struct.camera_photo_distance_m;
    cpp_struct.vehicle_action = translate_mission_item_vehicle_action_from_c(c_struct.vehicle_action);
    return cpp_struct;
}


static mavsdk_mission_mission_item_camera_action_t
translate_mission_item_camera_action_to_c(mavsdk::Mission::MissionItem::CameraAction cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::Mission::MissionItem::CameraAction::None:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_NONE;
        case mavsdk::Mission::MissionItem::CameraAction::TakePhoto:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_TAKE_PHOTO;
        case mavsdk::Mission::MissionItem::CameraAction::StartPhotoInterval:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_INTERVAL;
        case mavsdk::Mission::MissionItem::CameraAction::StopPhotoInterval:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_INTERVAL;
        case mavsdk::Mission::MissionItem::CameraAction::StartVideo:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_VIDEO;
        case mavsdk::Mission::MissionItem::CameraAction::StopVideo:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_VIDEO;
        case mavsdk::Mission::MissionItem::CameraAction::StartPhotoDistance:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_START_PHOTO_DISTANCE;
        case mavsdk::Mission::MissionItem::CameraAction::StopPhotoDistance:
            return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_STOP_PHOTO_DISTANCE;
    }
    return MAVSDK_MISSION_MISSION_ITEM_CAMERA_ACTION_NONE;
}


static mavsdk_mission_mission_item_vehicle_action_t
translate_mission_item_vehicle_action_to_c(mavsdk::Mission::MissionItem::VehicleAction cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::Mission::MissionItem::VehicleAction::None:
            return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_NONE;
        case mavsdk::Mission::MissionItem::VehicleAction::Takeoff:
            return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TAKEOFF;
        case mavsdk::Mission::MissionItem::VehicleAction::Land:
            return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_LAND;
        case mavsdk::Mission::MissionItem::VehicleAction::TransitionToFw:
            return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_FW;
        case mavsdk::Mission::MissionItem::VehicleAction::TransitionToMc:
            return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_TRANSITION_TO_MC;
    }
    return MAVSDK_MISSION_MISSION_ITEM_VEHICLE_ACTION_NONE;
}

static mavsdk_mission_mission_item_t
translate_mission_item_to_c(const mavsdk::Mission::MissionItem& cpp_struct) {
    mavsdk_mission_mission_item_t c_struct{};
    c_struct.latitude_deg = cpp_struct.latitude_deg;
    c_struct.longitude_deg = cpp_struct.longitude_deg;
    c_struct.relative_altitude_m = cpp_struct.relative_altitude_m;
    c_struct.speed_m_s = cpp_struct.speed_m_s;
    c_struct.is_fly_through = cpp_struct.is_fly_through;
    c_struct.gimbal_pitch_deg = cpp_struct.gimbal_pitch_deg;
    c_struct.gimbal_yaw_deg = cpp_struct.gimbal_yaw_deg;
    c_struct.camera_action = translate_mission_item_camera_action_to_c(cpp_struct.camera_action);
    c_struct.loiter_time_s = cpp_struct.loiter_time_s;
    c_struct.camera_photo_interval_s = cpp_struct.camera_photo_interval_s;
    c_struct.acceptance_radius_m = cpp_struct.acceptance_radius_m;
    c_struct.yaw_deg = cpp_struct.yaw_deg;
    c_struct.camera_photo_distance_m = cpp_struct.camera_photo_distance_m;
    c_struct.vehicle_action = translate_mission_item_vehicle_action_to_c(cpp_struct.vehicle_action);
    return c_struct;
}

void mavsdk_mission_mission_item_destroy(
    mavsdk_mission_mission_item_t* target) {
    if (!target) return;
}

void mavsdk_mission_mission_item_array_destroy(
    mavsdk_mission_mission_item_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mission_mission_item_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mission::MissionPlan
translate_mission_plan_from_c(const mavsdk_mission_mission_plan_t& c_struct) {
    mavsdk::Mission::MissionPlan cpp_struct{};
    cpp_struct.mission_items.reserve(c_struct.mission_items_size);
    for (size_t i = 0; i < c_struct.mission_items_size; i++) {
        cpp_struct.mission_items.push_back(
            translate_mission_item_from_c(c_struct.mission_items[i]));
    }
    return cpp_struct;
}

static mavsdk_mission_mission_plan_t
translate_mission_plan_to_c(const mavsdk::Mission::MissionPlan& cpp_struct) {
    mavsdk_mission_mission_plan_t c_struct{};
    c_struct.mission_items_size = cpp_struct.mission_items.size();
    c_struct.mission_items = new mavsdk_mission_mission_item_t[c_struct.mission_items_size];
    for (size_t i = 0; i < c_struct.mission_items_size; i++) {
        c_struct.mission_items[i] = translate_mission_item_to_c(cpp_struct.mission_items[i]);
    }
    return c_struct;
}

void mavsdk_mission_mission_plan_destroy(
    mavsdk_mission_mission_plan_t* target) {
    if (!target) return;
    if (target->mission_items) {
        for (size_t i = 0; i < target->mission_items_size; i++) {
            mavsdk_mission_mission_item_destroy(&target->mission_items[i]);
        }
        delete[] target->mission_items;
        target->mission_items = nullptr;
        target->mission_items_size = 0;
    }
}

void mavsdk_mission_mission_plan_array_destroy(
    mavsdk_mission_mission_plan_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mission_mission_plan_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mission::MissionProgress
translate_mission_progress_from_c(const mavsdk_mission_mission_progress_t& c_struct) {
    mavsdk::Mission::MissionProgress cpp_struct{};
    cpp_struct.current = c_struct.current;
    cpp_struct.total = c_struct.total;
    return cpp_struct;
}

static mavsdk_mission_mission_progress_t
translate_mission_progress_to_c(const mavsdk::Mission::MissionProgress& cpp_struct) {
    mavsdk_mission_mission_progress_t c_struct{};
    c_struct.current = cpp_struct.current;
    c_struct.total = cpp_struct.total;
    return c_struct;
}

void mavsdk_mission_mission_progress_destroy(
    mavsdk_mission_mission_progress_t* target) {
    if (!target) return;
}

void mavsdk_mission_mission_progress_array_destroy(
    mavsdk_mission_mission_progress_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mission_mission_progress_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}



static mavsdk::Mission::ProgressData
translate_progress_data_from_c(const mavsdk_mission_progress_data_t& c_struct) {
    mavsdk::Mission::ProgressData cpp_struct{};
    cpp_struct.progress = c_struct.progress;
    return cpp_struct;
}

static mavsdk_mission_progress_data_t
translate_progress_data_to_c(const mavsdk::Mission::ProgressData& cpp_struct) {
    mavsdk_mission_progress_data_t c_struct{};
    c_struct.progress = cpp_struct.progress;
    return c_struct;
}

void mavsdk_mission_progress_data_destroy(
    mavsdk_mission_progress_data_t* target) {
    if (!target) return;
}

void mavsdk_mission_progress_data_array_destroy(
    mavsdk_mission_progress_data_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mission_progress_data_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::Mission::ProgressDataOrMission
translate_progress_data_or_mission_from_c(const mavsdk_mission_progress_data_or_mission_t& c_struct) {
    mavsdk::Mission::ProgressDataOrMission cpp_struct{};
    cpp_struct.has_progress = c_struct.has_progress;
    cpp_struct.progress = c_struct.progress;
    cpp_struct.has_mission = c_struct.has_mission;
    cpp_struct.mission_plan = translate_mission_plan_from_c(c_struct.mission_plan);
    return cpp_struct;
}

static mavsdk_mission_progress_data_or_mission_t
translate_progress_data_or_mission_to_c(const mavsdk::Mission::ProgressDataOrMission& cpp_struct) {
    mavsdk_mission_progress_data_or_mission_t c_struct{};
    c_struct.has_progress = cpp_struct.has_progress;
    c_struct.progress = cpp_struct.progress;
    c_struct.has_mission = cpp_struct.has_mission;
    c_struct.mission_plan = translate_mission_plan_to_c(cpp_struct.mission_plan);
    return c_struct;
}

void mavsdk_mission_progress_data_or_mission_destroy(
    mavsdk_mission_progress_data_or_mission_t* target) {
    if (!target) return;
}

void mavsdk_mission_progress_data_or_mission_array_destroy(
    mavsdk_mission_progress_data_or_mission_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_mission_progress_data_or_mission_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


// ===== Primitive Array Destroy Functions =====
void mavsdk_mission_float_array_destroy(float** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_double_array_destroy(double** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_int32t_array_destroy(int32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_uint32t_array_destroy(uint32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_int64t_array_destroy(int64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_uint64t_array_destroy(uint64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_mission_bool_array_destroy(bool** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}


void mavsdk_mission_string_destroy(char** str) {
    if (!str || !*str) return;
    free(*str);
    *str = nullptr;
}

void mavsdk_mission_byte_buffer_destroy(uint8_t** buffer) {
    if (!buffer || !*buffer) return;
    delete[] *buffer;
    *buffer = nullptr;
}

// ===== Mission Wrapper =====

struct mavsdk_mission_wrapper {
    std::shared_ptr<mavsdk::Mission> cpp_plugin;
};

mavsdk_mission_t
mavsdk_mission_create(mavsdk_system_t system) {
    if (system == nullptr) {
        return nullptr;
    }

    auto wrapper = new mavsdk_mission_wrapper();
    auto system_ptr = reinterpret_cast<std::shared_ptr<mavsdk::System>*>(system);
    wrapper->cpp_plugin = std::make_shared<mavsdk::Mission>(*system_ptr);

    return reinterpret_cast<mavsdk_mission_t>(wrapper);
}

void mavsdk_mission_destroy(mavsdk_mission_t mission) {
    if (mission == nullptr) {
        return;
    }

    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);
    delete wrapper;
}

// ===== Method Implementations =====

// UploadMission async
void mavsdk_mission_upload_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan,
    mavsdk_mission_upload_mission_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->upload_mission_async(
        translate_mission_plan_from_c(mission_plan),
        [callback, user_data](
            mavsdk::Mission::Result result) {
                if (callback) {
                    callback(
                        translate_result(result),
                        user_data);
                }
        });
}


// UploadMission sync
mavsdk_mission_result_t
mavsdk_mission_upload_mission(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->upload_mission(        translate_mission_plan_from_c(mission_plan));

    return translate_result(ret_value);
}

// UploadMissionWithProgress async
void mavsdk_mission_upload_mission_with_progress_async(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t mission_plan,
    mavsdk_mission_upload_mission_with_progress_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->upload_mission_with_progress_async(
        translate_mission_plan_from_c(mission_plan),
        [callback, user_data](
            mavsdk::Mission::Result result,
            mavsdk::Mission::ProgressData value) {
                if (callback) {
                    callback(
                        translate_result(result),
                        translate_progress_data_to_c(value),
                        user_data);
                }
        });
}




// CancelMissionUpload sync
mavsdk_mission_result_t
mavsdk_mission_cancel_mission_upload(
    mavsdk_mission_t mission)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->cancel_mission_upload();

    return translate_result(ret_value);
}

// DownloadMission async
void mavsdk_mission_download_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_download_mission_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->download_mission_async(
        [callback, user_data](
            mavsdk::Mission::Result result,
            mavsdk::Mission::MissionPlan value) {
                if (callback) {
                    callback(
                        translate_result(result),
                        translate_mission_plan_to_c(value),
                        user_data);
                }
        });
}


// DownloadMission sync
mavsdk_mission_result_t
mavsdk_mission_download_mission(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_plan_t* mission_plan_out)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto result_pair = wrapper->cpp_plugin->download_mission(
);

    if (mission_plan_out != nullptr) {
        *mission_plan_out = translate_mission_plan_to_c(result_pair.second);
    }

    return translate_result(result_pair.first);
}

// DownloadMissionWithProgress async
void mavsdk_mission_download_mission_with_progress_async(
    mavsdk_mission_t mission,
    mavsdk_mission_download_mission_with_progress_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->download_mission_with_progress_async(
        [callback, user_data](
            mavsdk::Mission::Result result,
            mavsdk::Mission::ProgressDataOrMission value) {
                if (callback) {
                    callback(
                        translate_result(result),
                        translate_progress_data_or_mission_to_c(value),
                        user_data);
                }
        });
}




// CancelMissionDownload sync
mavsdk_mission_result_t
mavsdk_mission_cancel_mission_download(
    mavsdk_mission_t mission)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->cancel_mission_download();

    return translate_result(ret_value);
}

// StartMission async
void mavsdk_mission_start_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_start_mission_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->start_mission_async(
        [callback, user_data](
            mavsdk::Mission::Result result) {
                if (callback) {
                    callback(
                        translate_result(result),
                        user_data);
                }
        });
}


// StartMission sync
mavsdk_mission_result_t
mavsdk_mission_start_mission(
    mavsdk_mission_t mission)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->start_mission();

    return translate_result(ret_value);
}

// PauseMission async
void mavsdk_mission_pause_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_pause_mission_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->pause_mission_async(
        [callback, user_data](
            mavsdk::Mission::Result result) {
                if (callback) {
                    callback(
                        translate_result(result),
                        user_data);
                }
        });
}


// PauseMission sync
mavsdk_mission_result_t
mavsdk_mission_pause_mission(
    mavsdk_mission_t mission)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->pause_mission();

    return translate_result(ret_value);
}

// ClearMission async
void mavsdk_mission_clear_mission_async(
    mavsdk_mission_t mission,
    mavsdk_mission_clear_mission_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->clear_mission_async(
        [callback, user_data](
            mavsdk::Mission::Result result) {
                if (callback) {
                    callback(
                        translate_result(result),
                        user_data);
                }
        });
}


// ClearMission sync
mavsdk_mission_result_t
mavsdk_mission_clear_mission(
    mavsdk_mission_t mission)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->clear_mission();

    return translate_result(ret_value);
}

// SetCurrentMissionItem async
void mavsdk_mission_set_current_mission_item_async(
    mavsdk_mission_t mission,
    int32_t index,
    mavsdk_mission_set_current_mission_item_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    wrapper->cpp_plugin->set_current_mission_item_async(
        index,
        [callback, user_data](
            mavsdk::Mission::Result result) {
                if (callback) {
                    callback(
                        translate_result(result),
                        user_data);
                }
        });
}


// SetCurrentMissionItem sync
mavsdk_mission_result_t
mavsdk_mission_set_current_mission_item(
    mavsdk_mission_t mission,
    int32_t index)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->set_current_mission_item(        index);

    return translate_result(ret_value);
}


// IsMissionFinished sync
mavsdk_mission_result_t
mavsdk_mission_is_mission_finished(
    mavsdk_mission_t mission,
    bool* is_finished_out)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto result_pair = wrapper->cpp_plugin->is_mission_finished(
);

    *is_finished_out = result_pair.second;

    return translate_result(result_pair.first);
}

// MissionProgress async
mavsdk_mission_mission_progress_handle_t mavsdk_mission_subscribe_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_callback_t callback,
    void* user_data)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto cpp_handle =    wrapper->cpp_plugin->subscribe_mission_progress(
        [callback, user_data](
            mavsdk::Mission::MissionProgress value) {
                if (callback) {
                    callback(
                        translate_mission_progress_to_c(value),
                        user_data);
                }
        });

    auto handle_wrapper = new mavsdk::Mission::MissionProgressHandle(std::move(cpp_handle));
    return reinterpret_cast<mavsdk_mission_mission_progress_handle_t>(handle_wrapper);
}

void mavsdk_mission_unsubscribe_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_handle_t handle)
{
    if (handle) {
        auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);
        auto cpp_handle = reinterpret_cast<mavsdk::Mission::MissionProgressHandle*>(handle);
        wrapper->cpp_plugin->unsubscribe_mission_progress(std::move(*cpp_handle));
        delete cpp_handle;
    }
}

// MissionProgress sync
void
mavsdk_mission_mission_progress(
    mavsdk_mission_t mission,
    mavsdk_mission_mission_progress_t* mission_progress_out)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->mission_progress();

    if (mission_progress_out != nullptr) {
        *mission_progress_out = translate_mission_progress_to_c(ret_value);
    }
}


// GetReturnToLaunchAfterMission sync
mavsdk_mission_result_t
mavsdk_mission_get_return_to_launch_after_mission(
    mavsdk_mission_t mission,
    bool* enable_out)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto result_pair = wrapper->cpp_plugin->get_return_to_launch_after_mission(
);

    *enable_out = result_pair.second;

    return translate_result(result_pair.first);
}


// SetReturnToLaunchAfterMission sync
mavsdk_mission_result_t
mavsdk_mission_set_return_to_launch_after_mission(
    mavsdk_mission_t mission,
    bool enable)
{
    auto wrapper = reinterpret_cast<mavsdk_mission_wrapper*>(mission);

    auto ret_value = wrapper->cpp_plugin->set_return_to_launch_after_mission(        enable);

    return translate_result(ret_value);
}
