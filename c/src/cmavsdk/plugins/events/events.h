// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/events/events.proto)

#ifndef CMAVSDK_EVENTS_H
#define CMAVSDK_EVENTS_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Get event notifications, such as takeoff, or arming checks
 */

// ===== Forward Declarations =====
typedef void* mavsdk_system_t;

// ===== Opaque Handles =====
typedef void* mavsdk_events_t;
typedef void* mavsdk_events_events_handle_t;
typedef void* mavsdk_events_health_and_arming_checks_handle_t;

// ===== Enums =====
/**
 * @brief Log level type
 */
typedef enum {
    /**  Emergency. */
    MAVSDK_EVENTS_LOG_LEVEL_EMERGENCY = 0,
    /**  Alert. */
    MAVSDK_EVENTS_LOG_LEVEL_ALERT = 1,
    /**  Critical. */
    MAVSDK_EVENTS_LOG_LEVEL_CRITICAL = 2,
    /**  Error. */
    MAVSDK_EVENTS_LOG_LEVEL_ERROR = 3,
    /**  Warning. */
    MAVSDK_EVENTS_LOG_LEVEL_WARNING = 4,
    /**  Notice. */
    MAVSDK_EVENTS_LOG_LEVEL_NOTICE = 5,
    /**  Info. */
    MAVSDK_EVENTS_LOG_LEVEL_INFO = 6,
    /**  Debug. */
    MAVSDK_EVENTS_LOG_LEVEL_DEBUG = 7,
} mavsdk_events_log_level_t;


// ===== Structs =====
/**
 * @brief Event type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_events_event_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  The source component ID of the event */
    uint32_t compid;
    /**  Short, single-line message */
    char* message;
    /**  Detailed description (optional, might be multiple lines) */
    char* description;
    /**  Log level of message */
    mavsdk_events_log_level_t log_level;
    /**  Namespace, e.g. "px4" */
    char* event_namespace;
    /**  Event name (unique within the namespace) */
    char* event_name;
} mavsdk_events_event_t;

/**
 * @brief Destroy a event struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_events_event_destroy(
    mavsdk_events_event_t* target);

/**
 * @brief Destroy an array of event structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_events_event_array_destroy(
    mavsdk_events_event_t** array,
    size_t size);

/**
 * @brief Health and arming check problem type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_events_health_and_arming_check_problem_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Short, single-line message */
    char* message;
    /**  Detailed description (optional, might be multiple lines) */
    char* description;
    /**  Log level of message */
    mavsdk_events_log_level_t log_level;
    /**  Associated health component, e.g. "gps" */
    char* health_component;
} mavsdk_events_health_and_arming_check_problem_t;

/**
 * @brief Destroy a health_and_arming_check_problem struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_problem_destroy(
    mavsdk_events_health_and_arming_check_problem_t* target);

/**
 * @brief Destroy an array of health_and_arming_check_problem structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_problem_array_destroy(
    mavsdk_events_health_and_arming_check_problem_t** array,
    size_t size);

/**
 * @brief Arming checks for a specific mode
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_events_health_and_arming_check_mode_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Mode name, e.g. "Position" */
    char* mode_name;
    /**  If disarmed: indicates if arming is possible. If armed: indicates if the mode can be selected */
    bool can_arm_or_run;
    /**  List of reported problems for the mode */
    mavsdk_events_health_and_arming_check_problem_t* problems;
    size_t problems_size;
} mavsdk_events_health_and_arming_check_mode_t;

/**
 * @brief Destroy a health_and_arming_check_mode struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_mode_destroy(
    mavsdk_events_health_and_arming_check_mode_t* target);

/**
 * @brief Destroy an array of health_and_arming_check_mode structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_mode_array_destroy(
    mavsdk_events_health_and_arming_check_mode_t** array,
    size_t size);

/**
 * @brief Health component report type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_events_health_component_report_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Unique component name, e.g. "gps" */
    char* name;
    /**  Human readable label of the component, e.g. "GPS" or "Accelerometer" */
    char* label;
    /**  If the component is present */
    bool is_present;
    /**  If the component has errors */
    bool has_error;
    /**  If the component has warnings */
    bool has_warning;
} mavsdk_events_health_component_report_t;

/**
 * @brief Destroy a health_component_report struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_events_health_component_report_destroy(
    mavsdk_events_health_component_report_t* target);

/**
 * @brief Destroy an array of health_component_report structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_events_health_component_report_array_destroy(
    mavsdk_events_health_component_report_t** array,
    size_t size);

/**
 * @brief Health and arming check report type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_events_health_and_arming_check_report_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Report for currently intended mode */
    mavsdk_events_health_and_arming_check_mode_t current_mode_intention;
    /**  Health components list (e.g. for "gps") */
    mavsdk_events_health_component_report_t* health_components;
    size_t health_components_size;
    /**  Complete list of problems */
    mavsdk_events_health_and_arming_check_problem_t* all_problems;
    size_t all_problems_size;
} mavsdk_events_health_and_arming_check_report_t;

/**
 * @brief Destroy a health_and_arming_check_report struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_report_destroy(
    mavsdk_events_health_and_arming_check_report_t* target);

/**
 * @brief Destroy an array of health_and_arming_check_report structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_events_health_and_arming_check_report_array_destroy(
    mavsdk_events_health_and_arming_check_report_t** array,
    size_t size);

/**
 * @brief Possible results returned
 */
typedef enum {
    /**  Successful result. */
    MAVSDK_EVENTS_RESULT_SUCCESS = 0,
    /**  Not available. */
    MAVSDK_EVENTS_RESULT_NOT_AVAILABLE = 1,
    /**  Connection error. */
    MAVSDK_EVENTS_RESULT_CONNECTION_ERROR = 2,
    /**  Unsupported. */
    MAVSDK_EVENTS_RESULT_UNSUPPORTED = 3,
    /**  Denied. */
    MAVSDK_EVENTS_RESULT_DENIED = 4,
    /**  Failed. */
    MAVSDK_EVENTS_RESULT_FAILED = 5,
    /**  Timeout. */
    MAVSDK_EVENTS_RESULT_TIMEOUT = 6,
    /**  No system available. */
    MAVSDK_EVENTS_RESULT_NO_SYSTEM = 7,
    /**  Unknown result. */
    MAVSDK_EVENTS_RESULT_UNKNOWN = 8,
} mavsdk_events_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_events_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_events_events_callback_t)(const mavsdk_events_event_t event, void* user_data);
typedef void (*mavsdk_events_health_and_arming_checks_callback_t)(const mavsdk_events_health_and_arming_check_report_t report, void* user_data);

// ===== Events Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_events_t mavsdk_events_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_events_destroy(mavsdk_events_t events);

// ===== Methods =====

/**
 * @brief Subscribe to event updates.
 *
 * @param events The events instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_events_unsubscribe_events() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_events_events_handle_t mavsdk_events_subscribe_events(
    mavsdk_events_t events,
    mavsdk_events_events_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'events' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param events The events instance.
 * @param handle The subscription handle returned by mavsdk_events_subscribe_events().
 */
CMAVSDK_EXPORT void mavsdk_events_unsubscribe_events(
    mavsdk_events_t events,
    mavsdk_events_events_handle_t);


/**
 * @brief Subscribe to arming check updates.
 *
 * @param events The events instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_events_unsubscribe_health_and_arming_checks() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_events_health_and_arming_checks_handle_t mavsdk_events_subscribe_health_and_arming_checks(
    mavsdk_events_t events,
    mavsdk_events_health_and_arming_checks_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'health_and_arming_checks' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param events The events instance.
 * @param handle The subscription handle returned by mavsdk_events_subscribe_health_and_arming_checks().
 */
CMAVSDK_EXPORT void mavsdk_events_unsubscribe_health_and_arming_checks(
    mavsdk_events_t events,
    mavsdk_events_health_and_arming_checks_handle_t);


/**
 * @brief Get the current get health and arming checks report (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_health_and_arming_checks_report_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_events_result_t
mavsdk_events_get_health_and_arming_checks_report(
    mavsdk_events_t events,
    mavsdk_events_health_and_arming_check_report_t* report_out);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_EVENTS_H