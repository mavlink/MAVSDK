// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/telemetry_server/telemetry_server.proto)

#include "telemetry_server.h"

#include <mavsdk/plugins/telemetry_server/telemetry_server.h>
#include <cstring>
#include <vector>

// ===== C++ to C Type Conversions =====

static mavsdk_telemetry_server_result_t
translate_result(mavsdk::TelemetryServer::Result cpp_result) {
    switch(cpp_result) {
        case mavsdk::TelemetryServer::Result::Unknown:
            return MAVSDK_TELEMETRY_SERVER_RESULT_UNKNOWN;
        case mavsdk::TelemetryServer::Result::Success:
            return MAVSDK_TELEMETRY_SERVER_RESULT_SUCCESS;
        case mavsdk::TelemetryServer::Result::NoSystem:
            return MAVSDK_TELEMETRY_SERVER_RESULT_NO_SYSTEM;
        case mavsdk::TelemetryServer::Result::ConnectionError:
            return MAVSDK_TELEMETRY_SERVER_RESULT_CONNECTION_ERROR;
        case mavsdk::TelemetryServer::Result::Busy:
            return MAVSDK_TELEMETRY_SERVER_RESULT_BUSY;
        case mavsdk::TelemetryServer::Result::CommandDenied:
            return MAVSDK_TELEMETRY_SERVER_RESULT_COMMAND_DENIED;
        case mavsdk::TelemetryServer::Result::Timeout:
            return MAVSDK_TELEMETRY_SERVER_RESULT_TIMEOUT;
        case mavsdk::TelemetryServer::Result::Unsupported:
            return MAVSDK_TELEMETRY_SERVER_RESULT_UNSUPPORTED;
    }
}

static mavsdk::TelemetryServer::FixType
translate_fix_type_from_c(mavsdk_telemetry_server_fix_type_t c_enum) {
    switch(c_enum) {
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_GPS:
            return mavsdk::TelemetryServer::FixType::NoGps;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_FIX:
            return mavsdk::TelemetryServer::FixType::NoFix;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_2D:
            return mavsdk::TelemetryServer::FixType::Fix2D;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_3D:
            return mavsdk::TelemetryServer::FixType::Fix3D;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_DGPS:
            return mavsdk::TelemetryServer::FixType::FixDgps;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FLOAT:
            return mavsdk::TelemetryServer::FixType::RtkFloat;
        case MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FIXED:
            return mavsdk::TelemetryServer::FixType::RtkFixed;
    }
    return mavsdk::TelemetryServer::FixType::NoGps;
}

static mavsdk_telemetry_server_fix_type_t
translate_fix_type_to_c(mavsdk::TelemetryServer::FixType cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::TelemetryServer::FixType::NoGps:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_GPS;
        case mavsdk::TelemetryServer::FixType::NoFix:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_FIX;
        case mavsdk::TelemetryServer::FixType::Fix2D:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_2D;
        case mavsdk::TelemetryServer::FixType::Fix3D:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_3D;
        case mavsdk::TelemetryServer::FixType::FixDgps:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_FIX_DGPS;
        case mavsdk::TelemetryServer::FixType::RtkFloat:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FLOAT;
        case mavsdk::TelemetryServer::FixType::RtkFixed:
            return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_RTK_FIXED;
    }
    return MAVSDK_TELEMETRY_SERVER_FIX_TYPE_NO_GPS;
}

static mavsdk::TelemetryServer::VtolState
translate_vtol_state_from_c(mavsdk_telemetry_server_vtol_state_t c_enum) {
    switch(c_enum) {
        case MAVSDK_TELEMETRY_SERVER_VTOL_STATE_UNDEFINED:
            return mavsdk::TelemetryServer::VtolState::Undefined;
        case MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_FW:
            return mavsdk::TelemetryServer::VtolState::TransitionToFw;
        case MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_MC:
            return mavsdk::TelemetryServer::VtolState::TransitionToMc;
        case MAVSDK_TELEMETRY_SERVER_VTOL_STATE_MC:
            return mavsdk::TelemetryServer::VtolState::Mc;
        case MAVSDK_TELEMETRY_SERVER_VTOL_STATE_FW:
            return mavsdk::TelemetryServer::VtolState::Fw;
    }
    return mavsdk::TelemetryServer::VtolState::Undefined;
}

static mavsdk_telemetry_server_vtol_state_t
translate_vtol_state_to_c(mavsdk::TelemetryServer::VtolState cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::TelemetryServer::VtolState::Undefined:
            return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_UNDEFINED;
        case mavsdk::TelemetryServer::VtolState::TransitionToFw:
            return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_FW;
        case mavsdk::TelemetryServer::VtolState::TransitionToMc:
            return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_TRANSITION_TO_MC;
        case mavsdk::TelemetryServer::VtolState::Mc:
            return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_MC;
        case mavsdk::TelemetryServer::VtolState::Fw:
            return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_FW;
    }
    return MAVSDK_TELEMETRY_SERVER_VTOL_STATE_UNDEFINED;
}

static mavsdk::TelemetryServer::StatusTextType
translate_status_text_type_from_c(mavsdk_telemetry_server_status_text_type_t c_enum) {
    switch(c_enum) {
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_DEBUG:
            return mavsdk::TelemetryServer::StatusTextType::Debug;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_INFO:
            return mavsdk::TelemetryServer::StatusTextType::Info;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_NOTICE:
            return mavsdk::TelemetryServer::StatusTextType::Notice;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_WARNING:
            return mavsdk::TelemetryServer::StatusTextType::Warning;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ERROR:
            return mavsdk::TelemetryServer::StatusTextType::Error;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_CRITICAL:
            return mavsdk::TelemetryServer::StatusTextType::Critical;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ALERT:
            return mavsdk::TelemetryServer::StatusTextType::Alert;
        case MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_EMERGENCY:
            return mavsdk::TelemetryServer::StatusTextType::Emergency;
    }
    return mavsdk::TelemetryServer::StatusTextType::Debug;
}

static mavsdk_telemetry_server_status_text_type_t
translate_status_text_type_to_c(mavsdk::TelemetryServer::StatusTextType cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::TelemetryServer::StatusTextType::Debug:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_DEBUG;
        case mavsdk::TelemetryServer::StatusTextType::Info:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_INFO;
        case mavsdk::TelemetryServer::StatusTextType::Notice:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_NOTICE;
        case mavsdk::TelemetryServer::StatusTextType::Warning:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_WARNING;
        case mavsdk::TelemetryServer::StatusTextType::Error:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ERROR;
        case mavsdk::TelemetryServer::StatusTextType::Critical:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_CRITICAL;
        case mavsdk::TelemetryServer::StatusTextType::Alert:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_ALERT;
        case mavsdk::TelemetryServer::StatusTextType::Emergency:
            return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_EMERGENCY;
    }
    return MAVSDK_TELEMETRY_SERVER_STATUS_TEXT_TYPE_DEBUG;
}

static mavsdk::TelemetryServer::LandedState
translate_landed_state_from_c(mavsdk_telemetry_server_landed_state_t c_enum) {
    switch(c_enum) {
        case MAVSDK_TELEMETRY_SERVER_LANDED_STATE_UNKNOWN:
            return mavsdk::TelemetryServer::LandedState::Unknown;
        case MAVSDK_TELEMETRY_SERVER_LANDED_STATE_ON_GROUND:
            return mavsdk::TelemetryServer::LandedState::OnGround;
        case MAVSDK_TELEMETRY_SERVER_LANDED_STATE_IN_AIR:
            return mavsdk::TelemetryServer::LandedState::InAir;
        case MAVSDK_TELEMETRY_SERVER_LANDED_STATE_TAKING_OFF:
            return mavsdk::TelemetryServer::LandedState::TakingOff;
        case MAVSDK_TELEMETRY_SERVER_LANDED_STATE_LANDING:
            return mavsdk::TelemetryServer::LandedState::Landing;
    }
    return mavsdk::TelemetryServer::LandedState::Unknown;
}

static mavsdk_telemetry_server_landed_state_t
translate_landed_state_to_c(mavsdk::TelemetryServer::LandedState cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::TelemetryServer::LandedState::Unknown:
            return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_UNKNOWN;
        case mavsdk::TelemetryServer::LandedState::OnGround:
            return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_ON_GROUND;
        case mavsdk::TelemetryServer::LandedState::InAir:
            return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_IN_AIR;
        case mavsdk::TelemetryServer::LandedState::TakingOff:
            return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_TAKING_OFF;
        case mavsdk::TelemetryServer::LandedState::Landing:
            return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_LANDING;
    }
    return MAVSDK_TELEMETRY_SERVER_LANDED_STATE_UNKNOWN;
}



static mavsdk::TelemetryServer::Position
translate_position_from_c(const mavsdk_telemetry_server_position_t& c_struct) {
    mavsdk::TelemetryServer::Position cpp_struct{};
    cpp_struct.latitude_deg = c_struct.latitude_deg;
    cpp_struct.longitude_deg = c_struct.longitude_deg;
    cpp_struct.absolute_altitude_m = c_struct.absolute_altitude_m;
    cpp_struct.relative_altitude_m = c_struct.relative_altitude_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_position_t
translate_position_to_c(const mavsdk::TelemetryServer::Position& cpp_struct) {
    mavsdk_telemetry_server_position_t c_struct{};
    c_struct.latitude_deg = cpp_struct.latitude_deg;
    c_struct.longitude_deg = cpp_struct.longitude_deg;
    c_struct.absolute_altitude_m = cpp_struct.absolute_altitude_m;
    c_struct.relative_altitude_m = cpp_struct.relative_altitude_m;
    return c_struct;
}

void mavsdk_telemetry_server_position_destroy(
    mavsdk_telemetry_server_position_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_position_array_destroy(
    mavsdk_telemetry_server_position_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_position_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Heading
translate_heading_from_c(const mavsdk_telemetry_server_heading_t& c_struct) {
    mavsdk::TelemetryServer::Heading cpp_struct{};
    cpp_struct.heading_deg = c_struct.heading_deg;
    return cpp_struct;
}

static mavsdk_telemetry_server_heading_t
translate_heading_to_c(const mavsdk::TelemetryServer::Heading& cpp_struct) {
    mavsdk_telemetry_server_heading_t c_struct{};
    c_struct.heading_deg = cpp_struct.heading_deg;
    return c_struct;
}

void mavsdk_telemetry_server_heading_destroy(
    mavsdk_telemetry_server_heading_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_heading_array_destroy(
    mavsdk_telemetry_server_heading_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_heading_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Quaternion
translate_quaternion_from_c(const mavsdk_telemetry_server_quaternion_t& c_struct) {
    mavsdk::TelemetryServer::Quaternion cpp_struct{};
    cpp_struct.w = c_struct.w;
    cpp_struct.x = c_struct.x;
    cpp_struct.y = c_struct.y;
    cpp_struct.z = c_struct.z;
    cpp_struct.timestamp_us = c_struct.timestamp_us;
    return cpp_struct;
}

static mavsdk_telemetry_server_quaternion_t
translate_quaternion_to_c(const mavsdk::TelemetryServer::Quaternion& cpp_struct) {
    mavsdk_telemetry_server_quaternion_t c_struct{};
    c_struct.w = cpp_struct.w;
    c_struct.x = cpp_struct.x;
    c_struct.y = cpp_struct.y;
    c_struct.z = cpp_struct.z;
    c_struct.timestamp_us = cpp_struct.timestamp_us;
    return c_struct;
}

void mavsdk_telemetry_server_quaternion_destroy(
    mavsdk_telemetry_server_quaternion_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_quaternion_array_destroy(
    mavsdk_telemetry_server_quaternion_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_quaternion_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::EulerAngle
translate_euler_angle_from_c(const mavsdk_telemetry_server_euler_angle_t& c_struct) {
    mavsdk::TelemetryServer::EulerAngle cpp_struct{};
    cpp_struct.roll_deg = c_struct.roll_deg;
    cpp_struct.pitch_deg = c_struct.pitch_deg;
    cpp_struct.yaw_deg = c_struct.yaw_deg;
    cpp_struct.timestamp_us = c_struct.timestamp_us;
    return cpp_struct;
}

static mavsdk_telemetry_server_euler_angle_t
translate_euler_angle_to_c(const mavsdk::TelemetryServer::EulerAngle& cpp_struct) {
    mavsdk_telemetry_server_euler_angle_t c_struct{};
    c_struct.roll_deg = cpp_struct.roll_deg;
    c_struct.pitch_deg = cpp_struct.pitch_deg;
    c_struct.yaw_deg = cpp_struct.yaw_deg;
    c_struct.timestamp_us = cpp_struct.timestamp_us;
    return c_struct;
}

void mavsdk_telemetry_server_euler_angle_destroy(
    mavsdk_telemetry_server_euler_angle_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_euler_angle_array_destroy(
    mavsdk_telemetry_server_euler_angle_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_euler_angle_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::AngularVelocityBody
translate_angular_velocity_body_from_c(const mavsdk_telemetry_server_angular_velocity_body_t& c_struct) {
    mavsdk::TelemetryServer::AngularVelocityBody cpp_struct{};
    cpp_struct.roll_rad_s = c_struct.roll_rad_s;
    cpp_struct.pitch_rad_s = c_struct.pitch_rad_s;
    cpp_struct.yaw_rad_s = c_struct.yaw_rad_s;
    return cpp_struct;
}

static mavsdk_telemetry_server_angular_velocity_body_t
translate_angular_velocity_body_to_c(const mavsdk::TelemetryServer::AngularVelocityBody& cpp_struct) {
    mavsdk_telemetry_server_angular_velocity_body_t c_struct{};
    c_struct.roll_rad_s = cpp_struct.roll_rad_s;
    c_struct.pitch_rad_s = cpp_struct.pitch_rad_s;
    c_struct.yaw_rad_s = cpp_struct.yaw_rad_s;
    return c_struct;
}

void mavsdk_telemetry_server_angular_velocity_body_destroy(
    mavsdk_telemetry_server_angular_velocity_body_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_angular_velocity_body_array_destroy(
    mavsdk_telemetry_server_angular_velocity_body_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_angular_velocity_body_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::GpsInfo
translate_gps_info_from_c(const mavsdk_telemetry_server_gps_info_t& c_struct) {
    mavsdk::TelemetryServer::GpsInfo cpp_struct{};
    cpp_struct.num_satellites = c_struct.num_satellites;
    cpp_struct.fix_type = translate_fix_type_from_c(c_struct.fix_type);
    return cpp_struct;
}

static mavsdk_telemetry_server_gps_info_t
translate_gps_info_to_c(const mavsdk::TelemetryServer::GpsInfo& cpp_struct) {
    mavsdk_telemetry_server_gps_info_t c_struct{};
    c_struct.num_satellites = cpp_struct.num_satellites;
    c_struct.fix_type = translate_fix_type_to_c(cpp_struct.fix_type);
    return c_struct;
}

void mavsdk_telemetry_server_gps_info_destroy(
    mavsdk_telemetry_server_gps_info_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_gps_info_array_destroy(
    mavsdk_telemetry_server_gps_info_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_gps_info_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::RawGps
translate_raw_gps_from_c(const mavsdk_telemetry_server_raw_gps_t& c_struct) {
    mavsdk::TelemetryServer::RawGps cpp_struct{};
    cpp_struct.timestamp_us = c_struct.timestamp_us;
    cpp_struct.latitude_deg = c_struct.latitude_deg;
    cpp_struct.longitude_deg = c_struct.longitude_deg;
    cpp_struct.absolute_altitude_m = c_struct.absolute_altitude_m;
    cpp_struct.hdop = c_struct.hdop;
    cpp_struct.vdop = c_struct.vdop;
    cpp_struct.velocity_m_s = c_struct.velocity_m_s;
    cpp_struct.cog_deg = c_struct.cog_deg;
    cpp_struct.altitude_ellipsoid_m = c_struct.altitude_ellipsoid_m;
    cpp_struct.horizontal_uncertainty_m = c_struct.horizontal_uncertainty_m;
    cpp_struct.vertical_uncertainty_m = c_struct.vertical_uncertainty_m;
    cpp_struct.velocity_uncertainty_m_s = c_struct.velocity_uncertainty_m_s;
    cpp_struct.heading_uncertainty_deg = c_struct.heading_uncertainty_deg;
    cpp_struct.yaw_deg = c_struct.yaw_deg;
    return cpp_struct;
}

static mavsdk_telemetry_server_raw_gps_t
translate_raw_gps_to_c(const mavsdk::TelemetryServer::RawGps& cpp_struct) {
    mavsdk_telemetry_server_raw_gps_t c_struct{};
    c_struct.timestamp_us = cpp_struct.timestamp_us;
    c_struct.latitude_deg = cpp_struct.latitude_deg;
    c_struct.longitude_deg = cpp_struct.longitude_deg;
    c_struct.absolute_altitude_m = cpp_struct.absolute_altitude_m;
    c_struct.hdop = cpp_struct.hdop;
    c_struct.vdop = cpp_struct.vdop;
    c_struct.velocity_m_s = cpp_struct.velocity_m_s;
    c_struct.cog_deg = cpp_struct.cog_deg;
    c_struct.altitude_ellipsoid_m = cpp_struct.altitude_ellipsoid_m;
    c_struct.horizontal_uncertainty_m = cpp_struct.horizontal_uncertainty_m;
    c_struct.vertical_uncertainty_m = cpp_struct.vertical_uncertainty_m;
    c_struct.velocity_uncertainty_m_s = cpp_struct.velocity_uncertainty_m_s;
    c_struct.heading_uncertainty_deg = cpp_struct.heading_uncertainty_deg;
    c_struct.yaw_deg = cpp_struct.yaw_deg;
    return c_struct;
}

void mavsdk_telemetry_server_raw_gps_destroy(
    mavsdk_telemetry_server_raw_gps_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_raw_gps_array_destroy(
    mavsdk_telemetry_server_raw_gps_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_raw_gps_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Battery
translate_battery_from_c(const mavsdk_telemetry_server_battery_t& c_struct) {
    mavsdk::TelemetryServer::Battery cpp_struct{};
    cpp_struct.voltage_v = c_struct.voltage_v;
    cpp_struct.remaining_percent = c_struct.remaining_percent;
    return cpp_struct;
}

static mavsdk_telemetry_server_battery_t
translate_battery_to_c(const mavsdk::TelemetryServer::Battery& cpp_struct) {
    mavsdk_telemetry_server_battery_t c_struct{};
    c_struct.voltage_v = cpp_struct.voltage_v;
    c_struct.remaining_percent = cpp_struct.remaining_percent;
    return c_struct;
}

void mavsdk_telemetry_server_battery_destroy(
    mavsdk_telemetry_server_battery_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_battery_array_destroy(
    mavsdk_telemetry_server_battery_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_battery_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::RcStatus
translate_rc_status_from_c(const mavsdk_telemetry_server_rc_status_t& c_struct) {
    mavsdk::TelemetryServer::RcStatus cpp_struct{};
    cpp_struct.was_available_once = c_struct.was_available_once;
    cpp_struct.is_available = c_struct.is_available;
    cpp_struct.signal_strength_percent = c_struct.signal_strength_percent;
    return cpp_struct;
}

static mavsdk_telemetry_server_rc_status_t
translate_rc_status_to_c(const mavsdk::TelemetryServer::RcStatus& cpp_struct) {
    mavsdk_telemetry_server_rc_status_t c_struct{};
    c_struct.was_available_once = cpp_struct.was_available_once;
    c_struct.is_available = cpp_struct.is_available;
    c_struct.signal_strength_percent = cpp_struct.signal_strength_percent;
    return c_struct;
}

void mavsdk_telemetry_server_rc_status_destroy(
    mavsdk_telemetry_server_rc_status_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_rc_status_array_destroy(
    mavsdk_telemetry_server_rc_status_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_rc_status_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::StatusText
translate_status_text_from_c(const mavsdk_telemetry_server_status_text_t& c_struct) {
    mavsdk::TelemetryServer::StatusText cpp_struct{};
    cpp_struct.type = translate_status_text_type_from_c(c_struct.type);
    if (c_struct.text) {
        cpp_struct.text = c_struct.text;
    }
    return cpp_struct;
}

static mavsdk_telemetry_server_status_text_t
translate_status_text_to_c(const mavsdk::TelemetryServer::StatusText& cpp_struct) {
    mavsdk_telemetry_server_status_text_t c_struct{};
    c_struct.type = translate_status_text_type_to_c(cpp_struct.type);
    c_struct.text = strdup(cpp_struct.text.c_str());
    return c_struct;
}

void mavsdk_telemetry_server_status_text_destroy(
    mavsdk_telemetry_server_status_text_t* target) {
    if (!target) return;
    if (target->text) {
        free((void*)target->text);
        target->text = nullptr;
    }
}

void mavsdk_telemetry_server_status_text_array_destroy(
    mavsdk_telemetry_server_status_text_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_status_text_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::ActuatorControlTarget
translate_actuator_control_target_from_c(const mavsdk_telemetry_server_actuator_control_target_t& c_struct) {
    mavsdk::TelemetryServer::ActuatorControlTarget cpp_struct{};
    cpp_struct.group = c_struct.group;
    cpp_struct.controls.assign(
        c_struct.controls,
        c_struct.controls + c_struct.controls_size);
    return cpp_struct;
}

static mavsdk_telemetry_server_actuator_control_target_t
translate_actuator_control_target_to_c(const mavsdk::TelemetryServer::ActuatorControlTarget& cpp_struct) {
    mavsdk_telemetry_server_actuator_control_target_t c_struct{};
    c_struct.group = cpp_struct.group;
    c_struct.controls_size = cpp_struct.controls.size();
    c_struct.controls = new float[c_struct.controls_size];
    std::copy(cpp_struct.controls.begin(), cpp_struct.controls.end(), c_struct.controls);
    return c_struct;
}

void mavsdk_telemetry_server_actuator_control_target_destroy(
    mavsdk_telemetry_server_actuator_control_target_t* target) {
    if (!target) return;
    if (target->controls) {
        delete[] target->controls;
        target->controls = nullptr;
        target->controls_size = 0;
    }
}

void mavsdk_telemetry_server_actuator_control_target_array_destroy(
    mavsdk_telemetry_server_actuator_control_target_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_actuator_control_target_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::ActuatorOutputStatus
translate_actuator_output_status_from_c(const mavsdk_telemetry_server_actuator_output_status_t& c_struct) {
    mavsdk::TelemetryServer::ActuatorOutputStatus cpp_struct{};
    cpp_struct.active = c_struct.active;
    cpp_struct.actuator.assign(
        c_struct.actuator,
        c_struct.actuator + c_struct.actuator_size);
    return cpp_struct;
}

static mavsdk_telemetry_server_actuator_output_status_t
translate_actuator_output_status_to_c(const mavsdk::TelemetryServer::ActuatorOutputStatus& cpp_struct) {
    mavsdk_telemetry_server_actuator_output_status_t c_struct{};
    c_struct.active = cpp_struct.active;
    c_struct.actuator_size = cpp_struct.actuator.size();
    c_struct.actuator = new float[c_struct.actuator_size];
    std::copy(cpp_struct.actuator.begin(), cpp_struct.actuator.end(), c_struct.actuator);
    return c_struct;
}

void mavsdk_telemetry_server_actuator_output_status_destroy(
    mavsdk_telemetry_server_actuator_output_status_t* target) {
    if (!target) return;
    if (target->actuator) {
        delete[] target->actuator;
        target->actuator = nullptr;
        target->actuator_size = 0;
    }
}

void mavsdk_telemetry_server_actuator_output_status_array_destroy(
    mavsdk_telemetry_server_actuator_output_status_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_actuator_output_status_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Covariance
translate_covariance_from_c(const mavsdk_telemetry_server_covariance_t& c_struct) {
    mavsdk::TelemetryServer::Covariance cpp_struct{};
    cpp_struct.covariance_matrix.assign(
        c_struct.covariance_matrix,
        c_struct.covariance_matrix + c_struct.covariance_matrix_size);
    return cpp_struct;
}

static mavsdk_telemetry_server_covariance_t
translate_covariance_to_c(const mavsdk::TelemetryServer::Covariance& cpp_struct) {
    mavsdk_telemetry_server_covariance_t c_struct{};
    c_struct.covariance_matrix_size = cpp_struct.covariance_matrix.size();
    c_struct.covariance_matrix = new float[c_struct.covariance_matrix_size];
    std::copy(cpp_struct.covariance_matrix.begin(), cpp_struct.covariance_matrix.end(), c_struct.covariance_matrix);
    return c_struct;
}

void mavsdk_telemetry_server_covariance_destroy(
    mavsdk_telemetry_server_covariance_t* target) {
    if (!target) return;
    if (target->covariance_matrix) {
        delete[] target->covariance_matrix;
        target->covariance_matrix = nullptr;
        target->covariance_matrix_size = 0;
    }
}

void mavsdk_telemetry_server_covariance_array_destroy(
    mavsdk_telemetry_server_covariance_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_covariance_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::VelocityBody
translate_velocity_body_from_c(const mavsdk_telemetry_server_velocity_body_t& c_struct) {
    mavsdk::TelemetryServer::VelocityBody cpp_struct{};
    cpp_struct.x_m_s = c_struct.x_m_s;
    cpp_struct.y_m_s = c_struct.y_m_s;
    cpp_struct.z_m_s = c_struct.z_m_s;
    return cpp_struct;
}

static mavsdk_telemetry_server_velocity_body_t
translate_velocity_body_to_c(const mavsdk::TelemetryServer::VelocityBody& cpp_struct) {
    mavsdk_telemetry_server_velocity_body_t c_struct{};
    c_struct.x_m_s = cpp_struct.x_m_s;
    c_struct.y_m_s = cpp_struct.y_m_s;
    c_struct.z_m_s = cpp_struct.z_m_s;
    return c_struct;
}

void mavsdk_telemetry_server_velocity_body_destroy(
    mavsdk_telemetry_server_velocity_body_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_velocity_body_array_destroy(
    mavsdk_telemetry_server_velocity_body_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_velocity_body_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::PositionBody
translate_position_body_from_c(const mavsdk_telemetry_server_position_body_t& c_struct) {
    mavsdk::TelemetryServer::PositionBody cpp_struct{};
    cpp_struct.x_m = c_struct.x_m;
    cpp_struct.y_m = c_struct.y_m;
    cpp_struct.z_m = c_struct.z_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_position_body_t
translate_position_body_to_c(const mavsdk::TelemetryServer::PositionBody& cpp_struct) {
    mavsdk_telemetry_server_position_body_t c_struct{};
    c_struct.x_m = cpp_struct.x_m;
    c_struct.y_m = cpp_struct.y_m;
    c_struct.z_m = cpp_struct.z_m;
    return c_struct;
}

void mavsdk_telemetry_server_position_body_destroy(
    mavsdk_telemetry_server_position_body_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_position_body_array_destroy(
    mavsdk_telemetry_server_position_body_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_position_body_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Odometry::MavFrame
translate_odometry_mav_frame_from_c(mavsdk_telemetry_server_odometry_mav_frame_t c_enum) {
    switch(c_enum) {
        case MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_UNDEF:
            return mavsdk::TelemetryServer::Odometry::MavFrame::Undef;
        case MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_BODY_NED:
            return mavsdk::TelemetryServer::Odometry::MavFrame::BodyNed;
        case MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_VISION_NED:
            return mavsdk::TelemetryServer::Odometry::MavFrame::VisionNed;
        case MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_ESTIM_NED:
            return mavsdk::TelemetryServer::Odometry::MavFrame::EstimNed;
    }
    return mavsdk::TelemetryServer::Odometry::MavFrame::Undef;
}


static mavsdk::TelemetryServer::Odometry
translate_odometry_from_c(const mavsdk_telemetry_server_odometry_t& c_struct) {
    mavsdk::TelemetryServer::Odometry cpp_struct{};
    cpp_struct.time_usec = c_struct.time_usec;
    cpp_struct.frame_id = translate_odometry_mav_frame_from_c(c_struct.frame_id);
    cpp_struct.child_frame_id = translate_odometry_mav_frame_from_c(c_struct.child_frame_id);
    cpp_struct.position_body = translate_position_body_from_c(c_struct.position_body);
    cpp_struct.q = translate_quaternion_from_c(c_struct.q);
    cpp_struct.velocity_body = translate_velocity_body_from_c(c_struct.velocity_body);
    cpp_struct.angular_velocity_body = translate_angular_velocity_body_from_c(c_struct.angular_velocity_body);
    cpp_struct.pose_covariance = translate_covariance_from_c(c_struct.pose_covariance);
    cpp_struct.velocity_covariance = translate_covariance_from_c(c_struct.velocity_covariance);
    return cpp_struct;
}


static mavsdk_telemetry_server_odometry_mav_frame_t
translate_odometry_mav_frame_to_c(mavsdk::TelemetryServer::Odometry::MavFrame cpp_enum) {
    switch(cpp_enum) {
        case mavsdk::TelemetryServer::Odometry::MavFrame::Undef:
            return MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_UNDEF;
        case mavsdk::TelemetryServer::Odometry::MavFrame::BodyNed:
            return MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_BODY_NED;
        case mavsdk::TelemetryServer::Odometry::MavFrame::VisionNed:
            return MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_VISION_NED;
        case mavsdk::TelemetryServer::Odometry::MavFrame::EstimNed:
            return MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_ESTIM_NED;
    }
    return MAVSDK_TELEMETRY_SERVER_ODOMETRY_MAV_FRAME_UNDEF;
}

static mavsdk_telemetry_server_odometry_t
translate_odometry_to_c(const mavsdk::TelemetryServer::Odometry& cpp_struct) {
    mavsdk_telemetry_server_odometry_t c_struct{};
    c_struct.time_usec = cpp_struct.time_usec;
    c_struct.frame_id = translate_odometry_mav_frame_to_c(cpp_struct.frame_id);
    c_struct.child_frame_id = translate_odometry_mav_frame_to_c(cpp_struct.child_frame_id);
    c_struct.position_body = translate_position_body_to_c(cpp_struct.position_body);
    c_struct.q = translate_quaternion_to_c(cpp_struct.q);
    c_struct.velocity_body = translate_velocity_body_to_c(cpp_struct.velocity_body);
    c_struct.angular_velocity_body = translate_angular_velocity_body_to_c(cpp_struct.angular_velocity_body);
    c_struct.pose_covariance = translate_covariance_to_c(cpp_struct.pose_covariance);
    c_struct.velocity_covariance = translate_covariance_to_c(cpp_struct.velocity_covariance);
    return c_struct;
}

void mavsdk_telemetry_server_odometry_destroy(
    mavsdk_telemetry_server_odometry_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_odometry_array_destroy(
    mavsdk_telemetry_server_odometry_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_odometry_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::DistanceSensor
translate_distance_sensor_from_c(const mavsdk_telemetry_server_distance_sensor_t& c_struct) {
    mavsdk::TelemetryServer::DistanceSensor cpp_struct{};
    cpp_struct.minimum_distance_m = c_struct.minimum_distance_m;
    cpp_struct.maximum_distance_m = c_struct.maximum_distance_m;
    cpp_struct.current_distance_m = c_struct.current_distance_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_distance_sensor_t
translate_distance_sensor_to_c(const mavsdk::TelemetryServer::DistanceSensor& cpp_struct) {
    mavsdk_telemetry_server_distance_sensor_t c_struct{};
    c_struct.minimum_distance_m = cpp_struct.minimum_distance_m;
    c_struct.maximum_distance_m = cpp_struct.maximum_distance_m;
    c_struct.current_distance_m = cpp_struct.current_distance_m;
    return c_struct;
}

void mavsdk_telemetry_server_distance_sensor_destroy(
    mavsdk_telemetry_server_distance_sensor_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_distance_sensor_array_destroy(
    mavsdk_telemetry_server_distance_sensor_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_distance_sensor_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::ScaledPressure
translate_scaled_pressure_from_c(const mavsdk_telemetry_server_scaled_pressure_t& c_struct) {
    mavsdk::TelemetryServer::ScaledPressure cpp_struct{};
    cpp_struct.timestamp_us = c_struct.timestamp_us;
    cpp_struct.absolute_pressure_hpa = c_struct.absolute_pressure_hpa;
    cpp_struct.differential_pressure_hpa = c_struct.differential_pressure_hpa;
    cpp_struct.temperature_deg = c_struct.temperature_deg;
    cpp_struct.differential_pressure_temperature_deg = c_struct.differential_pressure_temperature_deg;
    return cpp_struct;
}

static mavsdk_telemetry_server_scaled_pressure_t
translate_scaled_pressure_to_c(const mavsdk::TelemetryServer::ScaledPressure& cpp_struct) {
    mavsdk_telemetry_server_scaled_pressure_t c_struct{};
    c_struct.timestamp_us = cpp_struct.timestamp_us;
    c_struct.absolute_pressure_hpa = cpp_struct.absolute_pressure_hpa;
    c_struct.differential_pressure_hpa = cpp_struct.differential_pressure_hpa;
    c_struct.temperature_deg = cpp_struct.temperature_deg;
    c_struct.differential_pressure_temperature_deg = cpp_struct.differential_pressure_temperature_deg;
    return c_struct;
}

void mavsdk_telemetry_server_scaled_pressure_destroy(
    mavsdk_telemetry_server_scaled_pressure_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_scaled_pressure_array_destroy(
    mavsdk_telemetry_server_scaled_pressure_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_scaled_pressure_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::PositionNed
translate_position_ned_from_c(const mavsdk_telemetry_server_position_ned_t& c_struct) {
    mavsdk::TelemetryServer::PositionNed cpp_struct{};
    cpp_struct.north_m = c_struct.north_m;
    cpp_struct.east_m = c_struct.east_m;
    cpp_struct.down_m = c_struct.down_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_position_ned_t
translate_position_ned_to_c(const mavsdk::TelemetryServer::PositionNed& cpp_struct) {
    mavsdk_telemetry_server_position_ned_t c_struct{};
    c_struct.north_m = cpp_struct.north_m;
    c_struct.east_m = cpp_struct.east_m;
    c_struct.down_m = cpp_struct.down_m;
    return c_struct;
}

void mavsdk_telemetry_server_position_ned_destroy(
    mavsdk_telemetry_server_position_ned_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_position_ned_array_destroy(
    mavsdk_telemetry_server_position_ned_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_position_ned_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::VelocityNed
translate_velocity_ned_from_c(const mavsdk_telemetry_server_velocity_ned_t& c_struct) {
    mavsdk::TelemetryServer::VelocityNed cpp_struct{};
    cpp_struct.north_m_s = c_struct.north_m_s;
    cpp_struct.east_m_s = c_struct.east_m_s;
    cpp_struct.down_m_s = c_struct.down_m_s;
    return cpp_struct;
}

static mavsdk_telemetry_server_velocity_ned_t
translate_velocity_ned_to_c(const mavsdk::TelemetryServer::VelocityNed& cpp_struct) {
    mavsdk_telemetry_server_velocity_ned_t c_struct{};
    c_struct.north_m_s = cpp_struct.north_m_s;
    c_struct.east_m_s = cpp_struct.east_m_s;
    c_struct.down_m_s = cpp_struct.down_m_s;
    return c_struct;
}

void mavsdk_telemetry_server_velocity_ned_destroy(
    mavsdk_telemetry_server_velocity_ned_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_velocity_ned_array_destroy(
    mavsdk_telemetry_server_velocity_ned_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_velocity_ned_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::PositionVelocityNed
translate_position_velocity_ned_from_c(const mavsdk_telemetry_server_position_velocity_ned_t& c_struct) {
    mavsdk::TelemetryServer::PositionVelocityNed cpp_struct{};
    cpp_struct.position = translate_position_ned_from_c(c_struct.position);
    cpp_struct.velocity = translate_velocity_ned_from_c(c_struct.velocity);
    return cpp_struct;
}

static mavsdk_telemetry_server_position_velocity_ned_t
translate_position_velocity_ned_to_c(const mavsdk::TelemetryServer::PositionVelocityNed& cpp_struct) {
    mavsdk_telemetry_server_position_velocity_ned_t c_struct{};
    c_struct.position = translate_position_ned_to_c(cpp_struct.position);
    c_struct.velocity = translate_velocity_ned_to_c(cpp_struct.velocity);
    return c_struct;
}

void mavsdk_telemetry_server_position_velocity_ned_destroy(
    mavsdk_telemetry_server_position_velocity_ned_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_position_velocity_ned_array_destroy(
    mavsdk_telemetry_server_position_velocity_ned_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_position_velocity_ned_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::GroundTruth
translate_ground_truth_from_c(const mavsdk_telemetry_server_ground_truth_t& c_struct) {
    mavsdk::TelemetryServer::GroundTruth cpp_struct{};
    cpp_struct.latitude_deg = c_struct.latitude_deg;
    cpp_struct.longitude_deg = c_struct.longitude_deg;
    cpp_struct.absolute_altitude_m = c_struct.absolute_altitude_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_ground_truth_t
translate_ground_truth_to_c(const mavsdk::TelemetryServer::GroundTruth& cpp_struct) {
    mavsdk_telemetry_server_ground_truth_t c_struct{};
    c_struct.latitude_deg = cpp_struct.latitude_deg;
    c_struct.longitude_deg = cpp_struct.longitude_deg;
    c_struct.absolute_altitude_m = cpp_struct.absolute_altitude_m;
    return c_struct;
}

void mavsdk_telemetry_server_ground_truth_destroy(
    mavsdk_telemetry_server_ground_truth_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_ground_truth_array_destroy(
    mavsdk_telemetry_server_ground_truth_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_ground_truth_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::FixedwingMetrics
translate_fixedwing_metrics_from_c(const mavsdk_telemetry_server_fixedwing_metrics_t& c_struct) {
    mavsdk::TelemetryServer::FixedwingMetrics cpp_struct{};
    cpp_struct.airspeed_m_s = c_struct.airspeed_m_s;
    cpp_struct.throttle_percentage = c_struct.throttle_percentage;
    cpp_struct.climb_rate_m_s = c_struct.climb_rate_m_s;
    cpp_struct.groundspeed_m_s = c_struct.groundspeed_m_s;
    cpp_struct.heading_deg = c_struct.heading_deg;
    cpp_struct.absolute_altitude_m = c_struct.absolute_altitude_m;
    return cpp_struct;
}

static mavsdk_telemetry_server_fixedwing_metrics_t
translate_fixedwing_metrics_to_c(const mavsdk::TelemetryServer::FixedwingMetrics& cpp_struct) {
    mavsdk_telemetry_server_fixedwing_metrics_t c_struct{};
    c_struct.airspeed_m_s = cpp_struct.airspeed_m_s;
    c_struct.throttle_percentage = cpp_struct.throttle_percentage;
    c_struct.climb_rate_m_s = cpp_struct.climb_rate_m_s;
    c_struct.groundspeed_m_s = cpp_struct.groundspeed_m_s;
    c_struct.heading_deg = cpp_struct.heading_deg;
    c_struct.absolute_altitude_m = cpp_struct.absolute_altitude_m;
    return c_struct;
}

void mavsdk_telemetry_server_fixedwing_metrics_destroy(
    mavsdk_telemetry_server_fixedwing_metrics_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_fixedwing_metrics_array_destroy(
    mavsdk_telemetry_server_fixedwing_metrics_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_fixedwing_metrics_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::AccelerationFrd
translate_acceleration_frd_from_c(const mavsdk_telemetry_server_acceleration_frd_t& c_struct) {
    mavsdk::TelemetryServer::AccelerationFrd cpp_struct{};
    cpp_struct.forward_m_s2 = c_struct.forward_m_s2;
    cpp_struct.right_m_s2 = c_struct.right_m_s2;
    cpp_struct.down_m_s2 = c_struct.down_m_s2;
    return cpp_struct;
}

static mavsdk_telemetry_server_acceleration_frd_t
translate_acceleration_frd_to_c(const mavsdk::TelemetryServer::AccelerationFrd& cpp_struct) {
    mavsdk_telemetry_server_acceleration_frd_t c_struct{};
    c_struct.forward_m_s2 = cpp_struct.forward_m_s2;
    c_struct.right_m_s2 = cpp_struct.right_m_s2;
    c_struct.down_m_s2 = cpp_struct.down_m_s2;
    return c_struct;
}

void mavsdk_telemetry_server_acceleration_frd_destroy(
    mavsdk_telemetry_server_acceleration_frd_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_acceleration_frd_array_destroy(
    mavsdk_telemetry_server_acceleration_frd_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_acceleration_frd_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::AngularVelocityFrd
translate_angular_velocity_frd_from_c(const mavsdk_telemetry_server_angular_velocity_frd_t& c_struct) {
    mavsdk::TelemetryServer::AngularVelocityFrd cpp_struct{};
    cpp_struct.forward_rad_s = c_struct.forward_rad_s;
    cpp_struct.right_rad_s = c_struct.right_rad_s;
    cpp_struct.down_rad_s = c_struct.down_rad_s;
    return cpp_struct;
}

static mavsdk_telemetry_server_angular_velocity_frd_t
translate_angular_velocity_frd_to_c(const mavsdk::TelemetryServer::AngularVelocityFrd& cpp_struct) {
    mavsdk_telemetry_server_angular_velocity_frd_t c_struct{};
    c_struct.forward_rad_s = cpp_struct.forward_rad_s;
    c_struct.right_rad_s = cpp_struct.right_rad_s;
    c_struct.down_rad_s = cpp_struct.down_rad_s;
    return c_struct;
}

void mavsdk_telemetry_server_angular_velocity_frd_destroy(
    mavsdk_telemetry_server_angular_velocity_frd_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_angular_velocity_frd_array_destroy(
    mavsdk_telemetry_server_angular_velocity_frd_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_angular_velocity_frd_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::MagneticFieldFrd
translate_magnetic_field_frd_from_c(const mavsdk_telemetry_server_magnetic_field_frd_t& c_struct) {
    mavsdk::TelemetryServer::MagneticFieldFrd cpp_struct{};
    cpp_struct.forward_gauss = c_struct.forward_gauss;
    cpp_struct.right_gauss = c_struct.right_gauss;
    cpp_struct.down_gauss = c_struct.down_gauss;
    return cpp_struct;
}

static mavsdk_telemetry_server_magnetic_field_frd_t
translate_magnetic_field_frd_to_c(const mavsdk::TelemetryServer::MagneticFieldFrd& cpp_struct) {
    mavsdk_telemetry_server_magnetic_field_frd_t c_struct{};
    c_struct.forward_gauss = cpp_struct.forward_gauss;
    c_struct.right_gauss = cpp_struct.right_gauss;
    c_struct.down_gauss = cpp_struct.down_gauss;
    return c_struct;
}

void mavsdk_telemetry_server_magnetic_field_frd_destroy(
    mavsdk_telemetry_server_magnetic_field_frd_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_magnetic_field_frd_array_destroy(
    mavsdk_telemetry_server_magnetic_field_frd_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_magnetic_field_frd_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}


static mavsdk::TelemetryServer::Imu
translate_imu_from_c(const mavsdk_telemetry_server_imu_t& c_struct) {
    mavsdk::TelemetryServer::Imu cpp_struct{};
    cpp_struct.acceleration_frd = translate_acceleration_frd_from_c(c_struct.acceleration_frd);
    cpp_struct.angular_velocity_frd = translate_angular_velocity_frd_from_c(c_struct.angular_velocity_frd);
    cpp_struct.magnetic_field_frd = translate_magnetic_field_frd_from_c(c_struct.magnetic_field_frd);
    cpp_struct.temperature_degc = c_struct.temperature_degc;
    cpp_struct.timestamp_us = c_struct.timestamp_us;
    return cpp_struct;
}

static mavsdk_telemetry_server_imu_t
translate_imu_to_c(const mavsdk::TelemetryServer::Imu& cpp_struct) {
    mavsdk_telemetry_server_imu_t c_struct{};
    c_struct.acceleration_frd = translate_acceleration_frd_to_c(cpp_struct.acceleration_frd);
    c_struct.angular_velocity_frd = translate_angular_velocity_frd_to_c(cpp_struct.angular_velocity_frd);
    c_struct.magnetic_field_frd = translate_magnetic_field_frd_to_c(cpp_struct.magnetic_field_frd);
    c_struct.temperature_degc = cpp_struct.temperature_degc;
    c_struct.timestamp_us = cpp_struct.timestamp_us;
    return c_struct;
}

void mavsdk_telemetry_server_imu_destroy(
    mavsdk_telemetry_server_imu_t* target) {
    if (!target) return;
}

void mavsdk_telemetry_server_imu_array_destroy(
    mavsdk_telemetry_server_imu_t** array,
    size_t size) {
    if (!array || !*array) return;

    for (size_t i = 0; i < size; i++) {
        mavsdk_telemetry_server_imu_destroy(&(*array)[i]);
    }

    delete[] *array;
    *array = nullptr;
}



// ===== Primitive Array Destroy Functions =====
void mavsdk_telemetry_server_float_array_destroy(float** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_double_array_destroy(double** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_int32t_array_destroy(int32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_uint32t_array_destroy(uint32_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_int64t_array_destroy(int64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_uint64t_array_destroy(uint64_t** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}

void mavsdk_telemetry_server_bool_array_destroy(bool** array) {
    if (!array || !*array) return;
    delete[] *array;
    *array = nullptr;
}


void mavsdk_telemetry_server_string_destroy(char** str) {
    if (!str || !*str) return;
    free(*str);
    *str = nullptr;
}

void mavsdk_telemetry_server_byte_buffer_destroy(uint8_t** buffer) {
    if (!buffer || !*buffer) return;
    delete[] *buffer;
    *buffer = nullptr;
}

// ===== TelemetryServer Wrapper =====

struct mavsdk_telemetry_server_wrapper {
    std::shared_ptr<mavsdk::TelemetryServer> cpp_plugin;
};

mavsdk_telemetry_server_t
mavsdk_telemetry_server_create(mavsdk_server_component_t server_component) {
    if (server_component == nullptr) {
        return nullptr;
    }

    auto wrapper = new mavsdk_telemetry_server_wrapper();
    auto server_component_ptr = static_cast<std::shared_ptr<mavsdk::ServerComponent>*>(server_component);
    wrapper->cpp_plugin = std::make_shared<mavsdk::TelemetryServer>(*server_component_ptr);

    return wrapper;
}

void mavsdk_telemetry_server_destroy(mavsdk_telemetry_server_t telemetry_server) {
    if (telemetry_server == nullptr) {
        return;
    }

    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);
    delete wrapper;
}

// ===== Method Implementations =====


// PublishPosition sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_position(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_t position,
    mavsdk_telemetry_server_velocity_ned_t velocity_ned,
    mavsdk_telemetry_server_heading_t heading)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_position(        translate_position_from_c(position),        translate_velocity_ned_from_c(velocity_ned),        translate_heading_from_c(heading));

    return translate_result(ret_value);
}


// PublishHome sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_home(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_t home)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_home(        translate_position_from_c(home));

    return translate_result(ret_value);
}


// PublishSysStatus sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_sys_status(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_battery_t battery,
    bool rc_receiver_status,
    bool gyro_status,
    bool accel_status,
    bool mag_status,
    bool gps_status)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_sys_status(        translate_battery_from_c(battery),        rc_receiver_status,        gyro_status,        accel_status,        mag_status,        gps_status);

    return translate_result(ret_value);
}


// PublishExtendedSysState sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_extended_sys_state(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_vtol_state_t vtol_state,
    mavsdk_telemetry_server_landed_state_t landed_state)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_extended_sys_state(        translate_vtol_state_from_c(vtol_state),        translate_landed_state_from_c(landed_state));

    return translate_result(ret_value);
}


// PublishRawGps sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_raw_gps(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_raw_gps_t raw_gps,
    mavsdk_telemetry_server_gps_info_t gps_info)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_raw_gps(        translate_raw_gps_from_c(raw_gps),        translate_gps_info_from_c(gps_info));

    return translate_result(ret_value);
}


// PublishBattery sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_battery(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_battery_t battery)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_battery(        translate_battery_from_c(battery));

    return translate_result(ret_value);
}


// PublishStatusText sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_status_text(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_status_text_t status_text)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_status_text(        translate_status_text_from_c(status_text));

    return translate_result(ret_value);
}


// PublishOdometry sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_odometry(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_odometry_t odometry)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_odometry(        translate_odometry_from_c(odometry));

    return translate_result(ret_value);
}


// PublishPositionVelocityNed sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_position_velocity_ned(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_position_velocity_ned_t position_velocity_ned)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_position_velocity_ned(        translate_position_velocity_ned_from_c(position_velocity_ned));

    return translate_result(ret_value);
}


// PublishGroundTruth sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_ground_truth(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_ground_truth_t ground_truth)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_ground_truth(        translate_ground_truth_from_c(ground_truth));

    return translate_result(ret_value);
}


// PublishImu sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_imu(        translate_imu_from_c(imu));

    return translate_result(ret_value);
}


// PublishScaledImu sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_scaled_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_scaled_imu(        translate_imu_from_c(imu));

    return translate_result(ret_value);
}


// PublishRawImu sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_raw_imu(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_imu_t imu)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_raw_imu(        translate_imu_from_c(imu));

    return translate_result(ret_value);
}


// PublishUnixEpochTime sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_unix_epoch_time(
    mavsdk_telemetry_server_t telemetry_server,
    uint64_t time_us)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_unix_epoch_time(        time_us);

    return translate_result(ret_value);
}


// PublishDistanceSensor sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_distance_sensor(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_distance_sensor_t distance_sensor)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_distance_sensor(        translate_distance_sensor_from_c(distance_sensor));

    return translate_result(ret_value);
}


// PublishAttitude sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_attitude(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_euler_angle_t angle,
    mavsdk_telemetry_server_angular_velocity_body_t angular_velocity)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_attitude(        translate_euler_angle_from_c(angle),        translate_angular_velocity_body_from_c(angular_velocity));

    return translate_result(ret_value);
}


// PublishVisualFlightRulesHud sync
mavsdk_telemetry_server_result_t
mavsdk_telemetry_server_publish_visual_flight_rules_hud(
    mavsdk_telemetry_server_t telemetry_server,
    mavsdk_telemetry_server_fixedwing_metrics_t fixed_wing_metrics)
{
    auto wrapper = static_cast<mavsdk_telemetry_server_wrapper*>(telemetry_server);

    auto ret_value = wrapper->cpp_plugin->publish_visual_flight_rules_hud(        translate_fixedwing_metrics_from_c(fixed_wing_metrics));

    return translate_result(ret_value);
}
