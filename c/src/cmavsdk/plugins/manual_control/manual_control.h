// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/manual_control/manual_control.proto)

#ifndef CMAVSDK_MANUAL_CONTROL_H
#define CMAVSDK_MANUAL_CONTROL_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Enable manual control using e.g. a joystick or gamepad.
 */

// ===== Forward Declarations =====
typedef struct mavsdk_system_s *mavsdk_system_t;

// ===== Opaque Handles =====
typedef struct mavsdk_manual_control_s *mavsdk_manual_control_t;

// ===== Enums =====

// ===== Structs =====
/**
 * @brief Possible results returned for manual control requests.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_MANUAL_CONTROL_RESULT_UNKNOWN = 0,
    /**  Request was successful. */
    MAVSDK_MANUAL_CONTROL_RESULT_SUCCESS = 1,
    /**  No system is connected. */
    MAVSDK_MANUAL_CONTROL_RESULT_NO_SYSTEM = 2,
    /**  Connection error. */
    MAVSDK_MANUAL_CONTROL_RESULT_CONNECTION_ERROR = 3,
    /**  Vehicle is busy. */
    MAVSDK_MANUAL_CONTROL_RESULT_BUSY = 4,
    /**  Command refused by vehicle. */
    MAVSDK_MANUAL_CONTROL_RESULT_COMMAND_DENIED = 5,
    /**  Request timed out. */
    MAVSDK_MANUAL_CONTROL_RESULT_TIMEOUT = 6,
    /**  Input out of range. */
    MAVSDK_MANUAL_CONTROL_RESULT_INPUT_OUT_OF_RANGE = 7,
    /**  No Input set. */
    MAVSDK_MANUAL_CONTROL_RESULT_INPUT_NOT_SET = 8,
} mavsdk_manual_control_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_manual_control_start_position_control_callback_t)(const mavsdk_manual_control_result_t result, void* user_data);
typedef void (*mavsdk_manual_control_start_altitude_control_callback_t)(const mavsdk_manual_control_result_t result, void* user_data);

// ===== ManualControl Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_manual_control_t mavsdk_manual_control_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_manual_control_destroy(mavsdk_manual_control_t manual_control);

// ===== Methods =====

/**
 * @brief Start position control using e.g. joystick input.
 * 
 *  Requires manual control input to be sent regularly already.
 *  Requires a valid position using e.g. GPS, external vision, or optical flow.
 *
 * @param manual_control The manual_control instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_start_position_control_async(
    mavsdk_manual_control_t manual_control,
    mavsdk_manual_control_start_position_control_callback_t callback,
    void* user_data);


/**
 * @brief Get the current start position control (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param start_position_control_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_manual_control_result_t
mavsdk_manual_control_start_position_control(
    mavsdk_manual_control_t manual_control);


/**
 * @brief Start altitude control
 * 
 *  Requires manual control input to be sent regularly already.
 *  Does not require a  valid position e.g. GPS.
 *
 * @param manual_control The manual_control instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_manual_control_start_altitude_control_async(
    mavsdk_manual_control_t manual_control,
    mavsdk_manual_control_start_altitude_control_callback_t callback,
    void* user_data);


/**
 * @brief Get the current start altitude control (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param start_altitude_control_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_manual_control_result_t
mavsdk_manual_control_start_altitude_control(
    mavsdk_manual_control_t manual_control);


/**
 * @brief Get the current set manual control input (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_manual_control_input_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_manual_control_result_t
mavsdk_manual_control_set_manual_control_input(
    mavsdk_manual_control_t manual_control,
    float x,
    float y,
    float z,
    float r);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_MANUAL_CONTROL_H