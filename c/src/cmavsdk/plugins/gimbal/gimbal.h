// WARNING: THIS FILE IS AUTOGENERATED! As such, it should not be edited.
// Edits need to be made to the proto files
// (see https://github.com/mavlink/MAVSDK-Proto/blob/main/protos/gimbal/gimbal.proto)

#ifndef CMAVSDK_GIMBAL_H
#define CMAVSDK_GIMBAL_H

#include <stddef.h>
#include <stdint.h>
#include <stdbool.h>
#include "cmavsdk/mavsdk_export.h"

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Provide control over a gimbal within the MAVLink
 * Gimbal Protocol: https://mavlink.io/en/services/gimbal_v2.html
 */

// ===== Forward Declarations =====
typedef struct mavsdk_system_s *mavsdk_system_t;

// ===== Opaque Handles =====
typedef struct mavsdk_gimbal_s *mavsdk_gimbal_t;
typedef struct mavsdk_gimbal_gimbal_list_handle_s *mavsdk_gimbal_gimbal_list_handle_t;
typedef struct mavsdk_gimbal_control_status_handle_s *mavsdk_gimbal_control_status_handle_t;
typedef struct mavsdk_gimbal_attitude_handle_s *mavsdk_gimbal_attitude_handle_t;

// ===== Enums =====
/**
 * @brief Gimbal mode type.
 */
typedef enum {
    /**  Yaw follow will point the gimbal to the vehicle heading. */
    MAVSDK_GIMBAL_GIMBAL_MODE_YAW_FOLLOW = 0,
    /**  Yaw lock will fix the gimbal pointing to an absolute direction. */
    MAVSDK_GIMBAL_GIMBAL_MODE_YAW_LOCK = 1,
} mavsdk_gimbal_gimbal_mode_t;

/**
 * @brief Control mode
 */
typedef enum {
    /**  Indicates that the component does not have control over the gimbal. */
    MAVSDK_GIMBAL_CONTROL_MODE_NONE = 0,
    /**  To take primary control over the gimbal. */
    MAVSDK_GIMBAL_CONTROL_MODE_PRIMARY = 1,
    /**  To take secondary control over the gimbal. */
    MAVSDK_GIMBAL_CONTROL_MODE_SECONDARY = 2,
} mavsdk_gimbal_control_mode_t;

/**
 * @brief The send mode type
 */
typedef enum {
    /**  Send command exactly once with quality of service (use for sporadic commands slower than 1 Hz). */
    MAVSDK_GIMBAL_SEND_MODE_ONCE = 0,
    /**  Stream setpoint without quality of service (use for setpoints faster than 1 Hz).. */
    MAVSDK_GIMBAL_SEND_MODE_STREAM = 1,
} mavsdk_gimbal_send_mode_t;


// ===== Structs =====
/**
 * @brief Quaternion type.
 * 
 *  All rotations and axis systems follow the right-hand rule.
 *  The Hamilton quaternion product definition is used.
 *  A zero-rotation quaternion is represented by (1,0,0,0).
 *  The quaternion could also be written as w + xi + yj + zk.
 * 
 *  For more info see: https://en.wikipedia.org/wiki/Quaternion
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_quaternion_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Quaternion entry 0, also denoted as a */
    float w;
    /**  Quaternion entry 1, also denoted as b */
    float x;
    /**  Quaternion entry 2, also denoted as c */
    float y;
    /**  Quaternion entry 3, also denoted as d */
    float z;
} mavsdk_gimbal_quaternion_t;

/**
 * @brief Destroy a quaternion struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_quaternion_destroy(
    mavsdk_gimbal_quaternion_t* target);

/**
 * @brief Destroy an array of quaternion structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_quaternion_array_destroy(
    mavsdk_gimbal_quaternion_t** array,
    size_t size);

/**
 * @brief Euler angle type.
 * 
 *  All rotations and axis systems follow the right-hand rule.
 *  The Euler angles are converted using the 3-1-2 sequence instead of standard 3-2-1 in order
 *  to avoid the gimbal lock at 90 degrees down.
 * 
 *  For more info see https://en.wikipedia.org/wiki/Euler_angles
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_euler_angle_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Roll angle in degrees, positive is banking to the right */
    float roll_deg;
    /**  Pitch angle in degrees, positive is pitching nose up */
    float pitch_deg;
    /**  Yaw angle in degrees, positive is clock-wise seen from above */
    float yaw_deg;
} mavsdk_gimbal_euler_angle_t;

/**
 * @brief Destroy a euler_angle struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_euler_angle_destroy(
    mavsdk_gimbal_euler_angle_t* target);

/**
 * @brief Destroy an array of euler_angle structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_euler_angle_array_destroy(
    mavsdk_gimbal_euler_angle_t** array,
    size_t size);

/**
 * @brief Gimbal angular rate type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_angular_velocity_body_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Roll angular velocity */
    float roll_rad_s;
    /**  Pitch angular velocity */
    float pitch_rad_s;
    /**  Yaw angular velocity */
    float yaw_rad_s;
} mavsdk_gimbal_angular_velocity_body_t;

/**
 * @brief Destroy a angular_velocity_body struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_angular_velocity_body_destroy(
    mavsdk_gimbal_angular_velocity_body_t* target);

/**
 * @brief Destroy an array of angular_velocity_body structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_angular_velocity_body_array_destroy(
    mavsdk_gimbal_angular_velocity_body_t** array,
    size_t size);

/**
 * @brief Gimbal attitude type
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_attitude_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Gimbal ID */
    int32_t gimbal_id;
    /**  Euler angle relative to forward */
    mavsdk_gimbal_euler_angle_t euler_angle_forward;
    /**  Quaternion relative to forward */
    mavsdk_gimbal_quaternion_t quaternion_forward;
    /**  Euler angle relative to North */
    mavsdk_gimbal_euler_angle_t euler_angle_north;
    /**  Quaternion relative to North */
    mavsdk_gimbal_quaternion_t quaternion_north;
    /**  The angular rate */
    mavsdk_gimbal_angular_velocity_body_t angular_velocity;
    /**  Timestamp in microseconds */
    uint64_t timestamp_us;
} mavsdk_gimbal_attitude_t;

/**
 * @brief Destroy a attitude struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_attitude_destroy(
    mavsdk_gimbal_attitude_t* target);

/**
 * @brief Destroy an array of attitude structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_attitude_array_destroy(
    mavsdk_gimbal_attitude_t** array,
    size_t size);

/**
 * @brief Gimbal list item
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_gimbal_item_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  ID to address it, starting at 1 (0 means all gimbals) */
    int32_t gimbal_id;
    /**  Vendor name */
    char* vendor_name;
    /**  Model name */
    char* model_name;
    /**  Custom name name */
    char* custom_name;
    /**  MAVLink component of gimbal manager, for debugging purposes */
    int32_t gimbal_manager_component_id;
    /**  MAVLink component of gimbal device */
    int32_t gimbal_device_id;
} mavsdk_gimbal_gimbal_item_t;

/**
 * @brief Destroy a gimbal_item struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_gimbal_item_destroy(
    mavsdk_gimbal_gimbal_item_t* target);

/**
 * @brief Destroy an array of gimbal_item structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_gimbal_item_array_destroy(
    mavsdk_gimbal_gimbal_item_t** array,
    size_t size);

/**
 * @brief Gimbal list
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_gimbal_list_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Gimbal items. */
    mavsdk_gimbal_gimbal_item_t* gimbals;
    size_t gimbals_size;
} mavsdk_gimbal_gimbal_list_t;

/**
 * @brief Destroy a gimbal_list struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_gimbal_list_destroy(
    mavsdk_gimbal_gimbal_list_t* target);

/**
 * @brief Destroy an array of gimbal_list structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_gimbal_list_array_destroy(
    mavsdk_gimbal_gimbal_list_t** array,
    size_t size);

/**
 * @brief Control status
 *
 * @note This struct may contain dynamically allocated memory. Always call
 *       mavsdk_gimbal_control_status_destroy() when done to avoid memory leaks.
 */
typedef struct CMAVSDK_EXPORT {
    /**  Gimbal ID */
    int32_t gimbal_id;
    /**  Control mode (none, primary or secondary) */
    mavsdk_gimbal_control_mode_t control_mode;
    /**  Sysid of the component that has primary control over the gimbal (0 if no one is in control) */
    int32_t sysid_primary_control;
    /**  Compid of the component that has primary control over the gimbal (0 if no one is in control) */
    int32_t compid_primary_control;
    /**  Sysid of the component that has secondary control over the gimbal (0 if no one is in control) */
    int32_t sysid_secondary_control;
    /**  Compid of the component that has secondary control over the gimbal (0 if no one is in control) */
    int32_t compid_secondary_control;
} mavsdk_gimbal_control_status_t;

/**
 * @brief Destroy a control_status struct.
 *
 * Frees all memory allocated by MAVSDK for this struct, including any
 * dynamically allocated arrays or strings. Must be called to avoid memory leaks.
 * Always call this function when done with the struct, even if it currently
 * contains no dynamic allocations.
 *
 * @param target Pointer to the struct to destroy. Can be NULL (no-op).
 */
CMAVSDK_EXPORT void mavsdk_gimbal_control_status_destroy(
    mavsdk_gimbal_control_status_t* target);

/**
 * @brief Destroy an array of control_status structs.
 *
 * Frees all memory allocated for the array and its elements, including any
 * nested dynamic allocations. Must be called to avoid memory leaks.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 * @param size Number of elements in the array.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_control_status_array_destroy(
    mavsdk_gimbal_control_status_t** array,
    size_t size);

/**
 * @brief Possible results returned for gimbal commands.
 */
typedef enum {
    /**  Unknown result. */
    MAVSDK_GIMBAL_RESULT_UNKNOWN = 0,
    /**  Command was accepted. */
    MAVSDK_GIMBAL_RESULT_SUCCESS = 1,
    /**  Error occurred sending the command. */
    MAVSDK_GIMBAL_RESULT_ERROR = 2,
    /**  Command timed out. */
    MAVSDK_GIMBAL_RESULT_TIMEOUT = 3,
    /**  Functionality not supported. */
    MAVSDK_GIMBAL_RESULT_UNSUPPORTED = 4,
    /**  No system connected. */
    MAVSDK_GIMBAL_RESULT_NO_SYSTEM = 5,
    /**  Invalid argument. */
    MAVSDK_GIMBAL_RESULT_INVALID_ARGUMENT = 6,
} mavsdk_gimbal_result_t;



// ===== Primitive Array Destroy Functions =====
/**
 * @brief Destroy an array of float.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_float_array_destroy(float** array);
/**
 * @brief Destroy an array of double.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_double_array_destroy(double** array);
/**
 * @brief Destroy an array of int32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_int32t_array_destroy(int32_t** array);
/**
 * @brief Destroy an array of uint32_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_uint32t_array_destroy(uint32_t** array);
/**
 * @brief Destroy an array of int64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_int64t_array_destroy(int64_t** array);
/**
 * @brief Destroy an array of uint64_t.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_uint64t_array_destroy(uint64_t** array);
/**
 * @brief Destroy an array of bool.
 *
 * Frees the memory allocated for the array.
 *
 * @param array Pointer to the array pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_bool_array_destroy(bool** array);

/**
 * @brief Destroy a string (char*).
 *
 * Frees the memory allocated for the string.
 *
 * @param str Pointer to the string pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_string_destroy(char** str);

/**
 * @brief Destroy a byte buffer (uint8_t*).
 *
 * Frees the memory allocated for the byte buffer.
 *
 * @param buffer Pointer to the buffer pointer. Will be set to NULL after freeing.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_byte_buffer_destroy(uint8_t** buffer);

// ===== Callback Typedefs =====
typedef void (*mavsdk_gimbal_set_angles_callback_t)(const mavsdk_gimbal_result_t result, void* user_data);
typedef void (*mavsdk_gimbal_set_angular_rates_callback_t)(const mavsdk_gimbal_result_t result, void* user_data);
typedef void (*mavsdk_gimbal_set_roi_location_callback_t)(const mavsdk_gimbal_result_t result, void* user_data);
typedef void (*mavsdk_gimbal_take_control_callback_t)(const mavsdk_gimbal_result_t result, void* user_data);
typedef void (*mavsdk_gimbal_release_control_callback_t)(const mavsdk_gimbal_result_t result, void* user_data);
typedef void (*mavsdk_gimbal_gimbal_list_callback_t)(const mavsdk_gimbal_gimbal_list_t gimbal_list, void* user_data);
typedef void (*mavsdk_gimbal_control_status_callback_t)(const mavsdk_gimbal_control_status_t control_status, void* user_data);
typedef void (*mavsdk_gimbal_attitude_callback_t)(const mavsdk_gimbal_attitude_t attitude, void* user_data);

// ===== Gimbal Creation/Destruction =====
CMAVSDK_EXPORT mavsdk_gimbal_t mavsdk_gimbal_create(mavsdk_system_t system);
CMAVSDK_EXPORT void mavsdk_gimbal_destroy(mavsdk_gimbal_t gimbal);

// ===== Methods =====

/**
 * @brief Set gimbal roll, pitch and yaw angles.
 * 
 *  This sets the desired roll, pitch and yaw angles of a gimbal.
 *  Will return when the command is accepted, however, it might
 *  take the gimbal longer to actually be set to the new angles.
 * 
 *  Note that the roll angle needs to be set to 0 when send_mode is Once.
 *
 * @param gimbal The gimbal instance.
* @param gimbal_id  Gimbal id to address (0 for all gimbals)
 * 
* @param roll_deg  Roll angle in degrees (negative down on the right)
 * 
* @param pitch_deg  Pitch angle in degrees (negative points down)
 * 
* @param yaw_deg  Yaw angle in degrees (positive is clock-wise, range: -180 to 180 or 0 to 360)
 * 
* @param gimbal_mode  Gimbal mode to use
 * 
* @param send_mode  Send mode of command/setpoint
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_set_angles_async(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    float roll_deg,
    float pitch_deg,
    float yaw_deg,
    mavsdk_gimbal_gimbal_mode_t gimbal_mode,
    mavsdk_gimbal_send_mode_t send_mode,
    mavsdk_gimbal_set_angles_callback_t callback,
    void* user_data);


/**
 * @brief Get the current set angles (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_angles_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_set_angles(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    float roll_deg,
    float pitch_deg,
    float yaw_deg,
    mavsdk_gimbal_gimbal_mode_t gimbal_mode,
    mavsdk_gimbal_send_mode_t send_mode);


/**
 * @brief Set gimbal angular rates.
 * 
 *  This sets the desired angular rates around roll, pitch and yaw axes of a gimbal.
 *  Will return when the command is accepted, however, it might
 *  take the gimbal longer to actually reach the angular rate.
 * 
 *  Note that the roll angle needs to be set to 0 when send_mode is Once.
 *
 * @param gimbal The gimbal instance.
* @param gimbal_id  Gimbal id to address (0 for all gimbals)
 * 
* @param roll_rate_deg_s  Angular rate around roll axis in degrees/second (negative down on the right)
 * 
* @param pitch_rate_deg_s  Angular rate around pitch axis in degrees/second (negative downward)
 * 
* @param yaw_rate_deg_s  Angular rate around yaw axis in degrees/second (positive is clock-wise)
 * 
* @param gimbal_mode  Gimbal mode to use
 * 
* @param send_mode  Send mode of command/setpoint
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_set_angular_rates_async(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    float roll_rate_deg_s,
    float pitch_rate_deg_s,
    float yaw_rate_deg_s,
    mavsdk_gimbal_gimbal_mode_t gimbal_mode,
    mavsdk_gimbal_send_mode_t send_mode,
    mavsdk_gimbal_set_angular_rates_callback_t callback,
    void* user_data);


/**
 * @brief Get the current set angular rates (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_angular_rates_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_set_angular_rates(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    float roll_rate_deg_s,
    float pitch_rate_deg_s,
    float yaw_rate_deg_s,
    mavsdk_gimbal_gimbal_mode_t gimbal_mode,
    mavsdk_gimbal_send_mode_t send_mode);


/**
 * @brief Set gimbal region of interest (ROI).
 * 
 *  This sets a region of interest that the gimbal will point to.
 *  The gimbal will continue to point to the specified region until it
 *  receives a new command.
 *  The function will return when the command is accepted, however, it might
 *  take the gimbal longer to actually rotate to the ROI.
 *
 * @param gimbal The gimbal instance.
* @param gimbal_id  Gimbal id to address (0 for all gimbals)
 * 
* @param latitude_deg  Latitude in degrees
 * 
* @param longitude_deg  Longitude in degrees
 * 
* @param altitude_m  Altitude in metres (AMSL)
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_set_roi_location_async(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    double latitude_deg,
    double longitude_deg,
    float altitude_m,
    mavsdk_gimbal_set_roi_location_callback_t callback,
    void* user_data);


/**
 * @brief Get the current set roi location (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param set_roi_location_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_set_roi_location(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    double latitude_deg,
    double longitude_deg,
    float altitude_m);


/**
 * @brief Take control.
 * 
 *  There can be only two components in control of a gimbal at any given time.
 *  One with "primary" control, and one with "secondary" control. The way the
 *  secondary control is implemented is not specified and hence depends on the
 *  vehicle.
 * 
 *  Components are expected to be cooperative, which means that they can
 *  override each other and should therefore do it carefully.
 *
 * @param gimbal The gimbal instance.
* @param gimbal_id  Gimbal id to address (0 for all gimbals)
 * 
* @param control_mode  Control mode (primary or secondary)
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_take_control_async(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    mavsdk_gimbal_control_mode_t control_mode,
    mavsdk_gimbal_take_control_callback_t callback,
    void* user_data);


/**
 * @brief Get the current take control (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param take_control_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_take_control(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    mavsdk_gimbal_control_mode_t control_mode);


/**
 * @brief Release control.
 * 
 *  Release control, such that other components can control the gimbal.
 *
 * @param gimbal The gimbal instance.
* @param gimbal_id  Gimbal id to address (0 for all gimbals)
 * 
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 */
CMAVSDK_EXPORT void mavsdk_gimbal_release_control_async(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    mavsdk_gimbal_release_control_callback_t callback,
    void* user_data);


/**
 * @brief Get the current release control (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param release_control_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_release_control(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id);


/**
 * @brief Subscribe to list of gimbals.
 * 
 *  This allows to find out what gimbals are connected to the system.
 *  Based on the gimbal ID, we can then address a specific gimbal.
 *
 * @param gimbal The gimbal instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_gimbal_unsubscribe_gimbal_list() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_gimbal_gimbal_list_handle_t mavsdk_gimbal_subscribe_gimbal_list(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_gimbal_list_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'gimbal_list' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param gimbal The gimbal instance.
 * @param handle The subscription handle returned by mavsdk_gimbal_subscribe_gimbal_list().
 */
CMAVSDK_EXPORT void mavsdk_gimbal_unsubscribe_gimbal_list(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_gimbal_list_handle_t);

/**
 * @brief Get the current gimbal list (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param gimbal_list_out Pointer to store the result.
 */
CMAVSDK_EXPORT
void
mavsdk_gimbal_gimbal_list(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_gimbal_list_t* gimbal_list_out);


/**
 * @brief Subscribe to control status updates.
 * 
 *  This allows a component to know if it has primary, secondary or
 *  no control over the gimbal. Also, it gives the system and component ids
 *  of the other components in control (if any).
 *
 * @param gimbal The gimbal instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_gimbal_unsubscribe_control_status() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_gimbal_control_status_handle_t mavsdk_gimbal_subscribe_control_status(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_control_status_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'control_status' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param gimbal The gimbal instance.
 * @param handle The subscription handle returned by mavsdk_gimbal_subscribe_control_status().
 */
CMAVSDK_EXPORT void mavsdk_gimbal_unsubscribe_control_status(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_control_status_handle_t);


/**
 * @brief Get the current get control status (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_control_status_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_get_control_status(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    mavsdk_gimbal_control_status_t* control_status_out);


/**
 * @brief Subscribe to attitude updates.
 * 
 *  This gets you the gimbal's attitude and angular rate.
 *
 * @param gimbal The gimbal instance.
 * @param callback Function to call when new data is available.
 * @param user_data User data to pass to the callback.
 * @return Handle for this subscription. Use mavsdk_gimbal_unsubscribe_attitude() to unsubscribe.
 */
CMAVSDK_EXPORT mavsdk_gimbal_attitude_handle_t mavsdk_gimbal_subscribe_attitude(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_attitude_callback_t callback,
    void* user_data);

/**
 * @brief Unsubscribe from 'attitude' updates.
 *
 * Stops the subscription and frees resources associated with the handle.
 *
 * @param gimbal The gimbal instance.
 * @param handle The subscription handle returned by mavsdk_gimbal_subscribe_attitude().
 */
CMAVSDK_EXPORT void mavsdk_gimbal_unsubscribe_attitude(
    mavsdk_gimbal_t gimbal,
    mavsdk_gimbal_attitude_handle_t);


/**
 * @brief Get the current get attitude (blocking).
 *
 * This function blocks until a value is available.
 *
 * @param telemetry The telemetry instance.
 * @param get_attitude_out Pointer to store the result.
 */
CMAVSDK_EXPORT
mavsdk_gimbal_result_t
mavsdk_gimbal_get_attitude(
    mavsdk_gimbal_t gimbal,
    int32_t gimbal_id,
    mavsdk_gimbal_attitude_t* attitude_out);


#ifdef __cplusplus
}
#endif

#endif // CMAVSDK_GIMBAL_H